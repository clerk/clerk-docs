---
title: Upgrading `@clerk/clerk-react` to Core 2
description: "Learn how to upgrade Clerk's React SDK to the latest version."
---

{/* WARNING: This is a generated file and should not be edited directly. To update its contents, see the "upgrade" package in the clerk/javascript repo. */}

Core 2 is included in the React SDK starting with version 5. This new version ships with an improved design and UX for its built-in components, no "flash of white page" when authenticating, and a variety of smaller DX improvements and housekeeping items. Each of the potentially breaking changes are detailed in this guide, below.

By the end of this guide, you’ll have successfully upgraded your React project to use `@clerk/clerk-react` v5. You’ll learn how to update your dependencies, resolve breaking changes, and find deprecations. Step-by-step instructions will lead you through the process.

## Preparing to upgrade

Before upgrading, it's highly recommended that you update your Clerk SDKs to the latest Core 1 version (`npm i @clerk/clerk-react@4`). Some changes required for Core 2 SDKs can be applied incrementally to the v5 release, which should contribute to a smoother upgrading experience. After updating, look out for deprecation messages in your terminal and browser console. By resolving these deprecations you'll be able to skip many breaking changes from Core 2.

Additionally, some of the minimum version requirements for some base dependencies have been updated such that versions that are no longer supported or are at end-of-life are no longer guaranteed to work correctly with Clerk.

**Updating Node.js**

You need to have Node.js `18.17.0` or later installed. Last year, Node.js 16 entered EOL (End of life) status, so support for this version has been removed across Clerk SDKs. You can check your Node.js version by running `node -v` in your terminal. Learn more about how to [update and install Node.js](https://nodejs.org/en/learn/getting-started/how-to-install-nodejs).

**Updating React**

All react-dependent Clerk SDKs now require you to use React 18 or higher. You can update your project by installing the latest version of `react` and `react-dom`.

```npm
npm install react@latest react-dom@latest
```

If you are upgrading from React 17 or lower, make sure to [learn about how to upgrade your React version to 18](https://react.dev/blog/2022/03/08/react-18-upgrade-guide) as well.

## Updating to Core 2

Whenever you feel ready, go ahead and install the latest version of any Clerk SDKs you are using. Make sure that you are prepared to patch some breaking changes before your app will work properly, however. The commands below demonstrate how to install the latest version.

```npm
npm install @clerk/clerk-react
```

## CLI upgrade helper

Clerk now provides a `@clerk/upgrade` CLI tool that you can use to ease the upgrade process. The tool will scan your codebase and produce a list of changes you'll need to apply to your project. It should catch the vast majority of the changes needed for a successful upgrade to any SDK including Core 2. This can save you a lot of time reading through changes that don't apply to your project.

To run the CLI tool, navigate to your project and run it in the terminal:

```npm
npx @clerk/upgrade --from=core-1
```

If you are having trouble with `npx`, it's also possible to install directly with `npm i @clerk/upgrade -g`, and can then be run with the `clerk-upgrade` command.

## Breaking Changes

### Component design adjustments

The new version ships with improved design and UX across all of Clerk's [UI components](/docs/reference/components/overview). If you have used the [`appearance` prop](/docs/guides/customizing-clerk/appearance-prop/overview) or tokens for a [custom theme](/docs/guides/customizing-clerk/appearance-prop/overview), you will likely need to make some adjustments to ensure your styling is still looking great. If you're using the [localization prop](/docs/guides/customizing-clerk/localization) you will likely need to make adjustments to account for added or removed localization keys.

[More detail on these changes »](/docs/guides/development/upgrading/upgrade-guides/core-2#component-redesign)

### After sign up/in/out default value change

In Core 2, defining redirect URLs for after sign-up, sign-in, or sign-out via the Clerk Dashboard has been removed. Previously, the "Paths" section in the Clerk Dashboard included "Component paths" where URLs could be defined, accompanied by a deprecation warning. This functionality is now removed, and specifying redirect paths via the dashboard is no longer supported.

If you need to pass a redirect URL for after sign-up, sign-in, or sign-out, there are [several ways to achieve this](/docs/guides/development/customize-redirect-urls), including environment variables, middleware, or passing them directly to the relevant components.

As part of this change, the default URL for each of these props has been set to `/`, so if you are passing `/` explicitly to any one of the above props, that line is no longer necessary and can be removed.

```jsx {{ prettier: false, del: [1], ins: [2] }}
<UserButton afterSignOutUrl="/" />
<UserButton />
```

### `afterSignXUrl` changes

> [!NOTE]
> This section refers to `afterSignXUrl` where `X` could be `Up` or `In` depending on the context.

All `afterSignXUrl` props and `CLERK_AFTER_SIGN_X_URL` environment variables have been deprecated, and should be replaced by one of the following options:

- `CLERK_SIGN_X_FORCE_REDIRECT_URL` / `signXForceRedirectUrl` – If set, Clerk will always redirect to provided URL, regardless of what page the user was on before. Use this option with caution, as it will interrupt the user's flow by taking them away from the page they were on before.
- `CLERK_SIGN_X_FALLBACK_REDIRECT_URL` / `signXFallbackRedirectUrl` – If set, this will mirror the previous behavior, only redirecting to the provided URL if there is no `redirect_url` in the querystring.

In general, use the environment variables over the props.

> [!WARNING]
> If neither value is set, Clerk will redirect to the `redirect_url` if present, otherwise it will redirect to `/`.

To retain the current behavior of your app without any changes, you can switch `afterSignXUrl` with `signXFallbackRedirectUrl` as such:

```jsx {{ prettier: false, del: [1], ins: [2] }}
<SignIn afterSignInUrl="/foo" />
<SignIn signInFallbackRedirectUrl="/foo" />
```

### `navigate` prop to `ClerkProvider` replaced by `routerPush` and `routerReplace`

The `navigate` prop on ClerkProvider allowed developers to override the default navigation behavior with a custom function. However, navigate was only able to push, not replace routes. We have now added the capability for the router to push or replace, and as such, upgraded the provider prop so that it can handle either depending on the circumstance.

Two new props have been added to `ClerkProvider` that replace the single `navigate` prop, and can be used to override the default navigation behavior for either a push or replace navigation. For more information on what push and replace mean in relation to the browser history api, see [MDN's docs](https://developer.mozilla.org/en-US/docs/Web/API/History_API/Working_with_the_History_API).

If you’d like to keep the same behavior as you had with the single `navigate` prop, pass the exact same function to both `routerPush` and `routerReplace` and the behavior will be identical. For example:

```jsx {{ prettier: false, del: [1], ins: [2] }}
<ClerkProvider navigate={(x) => x} />
<ClerkProvider routerPush={(x) => x} routerReplace={(x) => x} />
```

However, you now have the option to differentiate behavior based on whether the navigation will be a push or replace.

### Removed: `orgs` claim on JWT

In the previous version of Clerk's SDKs, if you decode the session token that Clerk returns from the server, you'll currently find an `orgs` claim on it. It lists all the orgs associated with the given user. Now, Clerk returns the `org_id`, `org_slug`, and `org_role` of the **active** organization.

The `orgs` claim was part of the `JwtPayload`. Here are a few examples of where the `JwtPayload` could be found.

<Accordion titles={["Next.js", "Fastify", "@clerk/backend", "@clerk/clerk-sdk-node"]} heading="h5">
  <AccordionPanel>
    ```typescript {{ filename: 'Next.js' }}
    import { getAuth } from '@clerk/nextjs/server'
    const claims: JwtPayload = getAuth(request).sessionClaims

    import { getAuth } from '@clerk/ssr.server'
    const claims: JwtPayload = (await getAuth(request)).sessionClaims
    ```
  </AccordionPanel>

  <AccordionPanel>
    ```typescript {{ filename: 'Fastify' }}
    import { getAuth } from '@clerk/fastify'
    const claims: JwtPayload = (await getAuth(request)).sessionClaims
    ```
  </AccordionPanel>

  <AccordionPanel>
    ```typescript {{ filename: '@clerk/backend' }}
    import { createClerkClient } from '@clerk/backend'

    const clerkClient = createClerkClient({ secretKey: '' })
    const requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })
    const claims: JwtPayload = requestState.toAuth().sessionClaims
    ```
  </AccordionPanel>

  <AccordionPanel>
    <Include src="_partials/upgrade-node-express.mdx" />

    ```typescript {{ filename: '@clerk/clerk-sdk-node' }}
    import { clerkClient } from '@clerk/clerk-sdk-node'

    router.use((...args) => clerkClient.expressRequireAuth()(...args))
    router.get('/me', async (req, reply: Response) => {
      return reply.json({ auth: req.auth })
    })
    ```
  </AccordionPanel>
</Accordion>

If you would like to have your JWT return all of the user's organizations, you can create a [custom JWT template](/docs/guides/sessions/jwt-templates) in your dashboard. Add `{ "orgs": "user.organizations" }` to it.

### Path routing is now the default

On components like [`<SignIn />`](/docs/reference/components/authentication/sign-in) you can define the props `routing` and `path`. `routing` can be set to `'hash' | 'path'` and describes the routing strategy that should be used. `path` defines where the component is mounted when `routing="path"` is used. [Learn more about Clerk routing](/docs/guides/how-clerk-works/routing).

In Core 2, the **default** `routing` strategy has become `'path'`. Unless you change the `routing` prop, you'll need to define the `path` prop. The affected components are:

- `<SignIn />`
- `<SignUp />`
- `<UserProfile />`
- `<CreateOrganization />`
- `<OrganizationProfile />`

Here's how you'd use the components going forward:

```jsx {{ prettier: false }}
<SignIn path="/sign-in" />
<SignUp path="/sign-up" />
<UserProfile path="/user-profile" />
<CreateOrganization path="/create-org" />
<OrganizationProfile path="/org-profile" />
```

If you don't define the `path` prop an error will be thrown. Of course, you can still use `routing="hash"` or `routing="virtual"`.

```jsx {{ prettier: false }}
<UserProfile routing="hash" />
<OrganizationProfile routing="virtual" />
```

### Image URL Name Consolidation

There are a number of Clerk primitives that contain images, and previously they each had different property names, like `avatarUrl`, `logoUrl`, `profileImageUrl`, etc. In order to promote consistency and make it simpler for developers to know where to find associated images, all image properties are now named `imageUrl`. See the list below for all affected classes:

<Accordion
  titles={["<code>Organization.logoUrl</code> -&gt; <code>Organization.imageUrl</code>", "<code>User.profileImageUrl</code> -&gt; <code>.imageUrl</code>", "<code>ExternalAccount.avatarUrl</code> -&gt; <code>.imageUrl</code>", "<code>OrganizationMembershipPublicUserData.profileImageUrl</code> -&gt; <code>.imageUrl</code>"]}
>
  <AccordionPanel>
    The `logoUrl` property of any [`Organization` object](/docs/reference/javascript/organization) has been changed to `imageUrl`.
  </AccordionPanel>

  <AccordionPanel>
    The `profileImageUrl` property of any `User` object has been changed to `imageUrl`.
  </AccordionPanel>

  <AccordionPanel>
    The `avatarUrl` property of any [`ExternalAccount` object](/docs/reference/javascript/types/external-account) has been changed to `imageUrl`.
  </AccordionPanel>

  <AccordionPanel>
    The `profileImageUrl` property of any `OrganizationMembershipPublicUserData` object has been changed to `imageUrl`.
  </AccordionPanel>
</Accordion>

### Deprecation removals & housekeeping

As part of this major version, a number of previously deprecated props, arguments, methods, etc. have been removed. Additionally there have been some changes to things that are only used internally, or only used very rarely. It's highly unlikely that any given app will encounter any of these items, but they are all breaking changes, so they have all been documented below.

> [!NOTE]
> For this section more than any other one, use the CLI upgrade tool (`npx @clerk/upgrade`). Changes in this
> section are very unlikely to appear in your codebase, the tool will save time looking for them.

#### Deprecation removals

<Accordion
  titles={["<code>User.update({ password: &#39;x&#39; })</code> -&gt; <code>User.updatePassword(&#39;x&#39;)</code>", "<code>frontendApi</code> -&gt; <code>publishableKey</code> as prop to <code>ClerkProvider</code>", "<code>afterSwitchOrganizationUrl</code> -&gt; <code>afterSelectOrganizationUrl</code> in <code>OrganizationSwitcher</code>", "<code>ClerkProviderOptionsWrapper</code> type removed"]}
>
  <AccordionPanel>
    If you are updating a user's password via the [`User.update` method](/docs/reference/javascript/user#update), it must be changed to [`User.updatePassword`](/docs/reference/javascript/user#update-password) instead. This method will require the current password as well as the desired new password. We made this update to improve the security of password changes. Example below:

    ```js {{ del: [1], ins: [[3, 7]] }}
    user.update({ password: 'foo' })

    user.updatePassword({
      currentPassword: 'bar',
      newPassword: 'foo',
      signOutOfOtherSessions: true,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `frontendApi` prop passed to `<ClerkProvider>` was renamed to `publishableKey`. To update, go to the [**API keys**](https://dashboard.clerk.com/~/api-keys) page in the Clerk Dashboard. After choosing your framework, copy and paste the new keys. Ensure this update is applied across all environments (e.g., development, staging, production). **Note:** The values are different, so this is not just a key replacement. [More information](/docs/guides/development/deployment/production#api-keys-and-environment-variables).
  </AccordionPanel>

  <AccordionPanel>
    The `afterSwitchOrganizationUrl` prop on the `<OrganizationSwitcher />` component has been renamed to `afterSelectOrganizationUrl`. This is a quick and simple rename.

    ```jsx {{ prettier: false, del: [1], ins: [2] }}
    <OrganizationSwitcher afterSwitchOrganizationUrl="..." />
    <OrganizationSwitcher afterSelectOrganizationUrl="..." />
    ```
  </AccordionPanel>

  <AccordionPanel>
    This type was extending `ClerkProviderProps` with but was not necessary. This type is typically used internally and is not required to be imported and used directly. If needed, import and use `ClerkProviderProps` instead.
  </AccordionPanel>
</Accordion>

#### Other Breaking changes

<Accordion
  titles={["<code>Organization.getRoles</code> arguments changed", "<code>Organization.getMemberships</code> arguments changed", "<code>Organization.getDomains</code> arguments changed", "<code>Organization.getInvitations</code> arguments changed", "<code>Organization.getMembershipRequests</code> arguments changed", "<code>User.getOrganizationInvitations</code> arguments changed", "<code>User.getOrganizationSuggestions</code> arguments changed", "<code>User.getOrganizationMemberships</code> arguments changed", "<code>Users.getOrganizationMembershipList</code> return signature changed", "<code>Users.getOrganizationInvitationList</code> return signature changed", "<code>Organizations.getOrganizationInvitationList</code> return type changed", "<code>User.getOrganizationMembershipList</code> return type changed", "<code>Users.getOrganizationList</code> return signature changed", "<code>Organization.getOrganizationList</code> return type changed", "<code>Invitations.getInvitationList</code> return signature changed", "<code>Sessions.getSessionList</code> return signature changed", "<code>Users.getUserList</code> return signature changed", "<code>AllowlistIdentifiers.getAllowlistIdentifierList</code> return signature changed", "<code>Clients.getClientList</code> return signature changed", "<code>RedirectUrls.getRedirectUrlList</code> return signature changed", "<code>Users.getUserOauthAccessToken</code> return signature changed", "<code>MagicLinkErrorCode</code> -&gt; <code>EmailLinkErrorCode</code>", "<code>useMagicLink</code> -&gt; <code>useEmailLink</code>", "<code>isMagicLinkError</code> -&gt; <code>isEmailLinkError</code>", "<code>MagicLinkError</code> -&gt; <code>EmailLinkError</code>", "<code>handleMagicLinkVerification</code> -&gt; <code>handleEmailLinkVerification</code>", "<code>invitationList</code> -&gt; <code>invitations</code> as param to <code>useOrganizations</code>", "<code>membershipList</code> -&gt; <code>members</code> as param to <code>useOrganization</code>", "<code>useOrganizations</code> -&gt; <code>useOrganizationList</code>", "<code>userProfile</code> -&gt; <code>userProfileProps</code> for <code>UserButton</code>", "<code>WithSession</code> component removed", "<code>WithClerk</code> component removed", "<code>WithUser</code> component removed", "<code>withClerk</code> function removed", "<code>withSession</code> function removed", "<code>withUser</code> function removed", "<code>MultisessionAppSupport</code> import moved to <code>/internal</code>", "Replace <code>signOutCallback</code> prop on <code>SignOutButton</code> with <code>redirectUrl</code>", "<code>setSession</code> -&gt; <code>setActive</code>", "<code>Organization.create(&#39;x&#39;)</code> -&gt; <code>Organization.create({ name: &#39;x&#39; })</code>", "<code>Organization.getPendingInvitations()</code> -&gt; <code>Organization.getInvitations({ status: &#39;pending&#39; })</code>"]}
>
  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await organization.getRoles({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await organization.getMemberships({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await organization.getDomains({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await organization.getInvitations({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await organization.getMembershipRequests({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await user.getOrganizationInvitations({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await user.getOrganizationSuggestions({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    There have been a couple changes to the pagination arguments that can be passed into this function - `limit` has been renamed to `pageSize`, and `offset` has been renamed to `initialPage`. This will help to make it more clear and simple to reason about pagination control. Example of how changes might look below:

    ```js {{ del: [2, 4], ins: [3, 5] }}
    const { data } = await user.getOrganizationMemberships({
      limit: 10,
      pageSize: 10,
      offset: 10,
      initialPage: 2,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Users.getOrganizationMembershipList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.users.getOrganizationMembershipList()
    const { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Users.getOrganizationInvitationList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.users.getOrganizationInvitationList()
    const { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The return type for this function was previously `[Items]` but has now been updated to `{ data: [Items], totalCount: number }`. Since the Clerk API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily. A before/after code example can be seen below:

    ```js {{ del: [5], ins: [6] }}
    const data = await clerkClient.organizations.getOrganizationInvitationList({
      organizationId: '...',
    })

    data.forEach(() => {})
    data.data.forEach(() => {})
    ```
  </AccordionPanel>

  <AccordionPanel>
    The return type for this function was previously `[Items]` but has now been updated to `{ data: [Items], totalCount: number }`. Since the Clerk API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily. A before/after code example can be seen below:

    ```js {{ del: [4], ins: [5] }}
    const { user } = useUser()
    const membershipList = user.getOrganizationMembershipList()

    membershipList.forEach(() => {})
    membershipList.data.forEach(() => {})
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Users.getOrganizationList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.users.getOrganizationList()
    const { data, totalCount } = await clerkClient.users.getOrganizationList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The return type for this function was previously `[Items]` but has now been updated to `{ data: [Items], totalCount: number }`. Since the Clerk API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily. A before/after code example can be seen below:

    ```js {{ del: [4], ins: [5] }}
    const { organization } = useOrganization()
    const orgList = organization.getOrganizationList()

    orgList.forEach(() => {})
    orgList.data.forEach(() => {})
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Invitations.getInvitationList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.invitations.getInvitationList()
    const { data, totalCount } = await clerkClient.invitations.getInvitationList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Sessions.getSessionList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.sessions.getSessionList()
    const { data, totalCount } = await clerkClient.sessions.getSessionList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Users.getUserList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.users.getUserList()
    const { data, totalCount } = await clerkClient.users.getUserList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `AllowlistIdentifiers.getAllowlistIdentifierList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()
    const { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Clients.getClientList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.clients.getClientList()
    const { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `RedirectUrls.getRedirectUrlList` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.redirectUrls.getRedirectUrlList()
    const { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()
    ```
  </AccordionPanel>

  <AccordionPanel>
    The response payload of `Users.getUserOauthAccessToken` was changed as part of the core 2 release. Rather than directly returning ` data`, the return signature is now `{ data, totalCount }`. Since Backend API responses are paginated, the `totalCount` property is helpful in determining the total number of items in the response easily, and this change in the backend SDK aligns the response shape with what the Backend API returns directly.

    Here's an example of how the response shape would change with this modification:

    ```js {{ del: [1], ins: [2] }}
    const data = await clerkClient.users.getUserOauthAccessToken()
    const { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()
    ```
  </AccordionPanel>

  <AccordionPanel>
    Across Clerk's documentation and codebases the term "magic link" was changed to "email link" as it more accurately reflects the functionality.
  </AccordionPanel>

  <AccordionPanel>
    Across Clerk's documentation and codebases the term "magic link" was changed to "email link" as it more accurately reflects functionality.
  </AccordionPanel>

  <AccordionPanel>
    Across Clerk's documentation and codebases the term "magic link" was changed to "email link" as it more accurately reflects the functionality.
  </AccordionPanel>

  <AccordionPanel>
    Across Clerk's documentation and codebases the term "magic link" was changed to "email link" as it more accurately reflects the functionality.
  </AccordionPanel>

  <AccordionPanel>
    Across Clerk's documentation and codebases the term "magic link" was changed to "email link" as it more accurately reflects functionality.
  </AccordionPanel>

  <AccordionPanel>
    The `invitationList` param to the `useOrganizations` hook has been replaced by `invitations`. This param also has a slightly different way of working, examples included below. Note also that `useOrganizations` is deprecated and should be updated to `useOrganization` instead.

    ```js
    // before
    const { invitationList } = useOrganization({
      invitationList: { limit: 10, offset: 1 },
    })

    // after
    const { invitations } = useOrganization({
      invitations: {
        initialPage: 1,
        pageSize: 10,
      },
    })

    // you can also simply return all invitations
    const { invitations } = useOrganization({ invitations: true })
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `membershipList` param from the `useOrganization` hook has been removed. Instead, [use the `memberships` param](/docs/reference/hooks/use-organization). Examples of each can be seen here:

    ```js
    // before
    const { membershipList } = useOrganization({
      membershipList: { limit: 10, offset: 1 },
    })

    // after
    const { memberships } = useOrganization({
      memberships: {
        initialPage: 1,
        pageSize: 10,
      },
    })

    // you can also simply return all memberships
    const { memberships } = useOrganization({ memberships: true })
    ```
  </AccordionPanel>

  <AccordionPanel>
    Any place where `useOrganizations` is used should be switched to [`useOrganizationList`](/docs/reference/hooks/use-organization-list) or [`useOrganization`](/docs/reference/hooks/use-organization) instead. The return signature has also changed, so take note of this when making the upgrade.

    ```js {{ prettier: false }}
    // before: useOrganizations return values
    {
      isLoaded: boolean,
      createOrganization: clerk.createOrganization,
      getOrganizationMemberships: clerk.getOrganizationMemberships,
      getOrganization: clerk.getOrganization,
    }

    // after: useOrganizationList return values
    {
      isLoaded: boolean,
      createOrganization: clerk.createOrganization,
      userMemberships: PaginatedResourcesWithDefault<...> | PaginatedResources<...>,
      userInvitations: PaginatedResourcesWithDefault<...> | PaginatedResources<...>,
      userSuggestions: PaginatedResourcesWithDefault<...> | PaginatedResources<...>,
      setActive: clerk.setActive,
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `userProfile` prop on [the `UserButton` component](/docs/reference/components/user/user-button) has been changed to `userProfileProps`. This is purely a name change, none of the values need to be updated.

    ```jsx {{ prettier: false, del: [1], ins: [2] }}
    <UserButton userProfile={} />
    <UserButton userProfileProps={} />
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `WithSession` higher order component has been removed. If you would still like to use this function in the way its implemented, it can be created quickly using Clerk's [custom hooks](/docs/reference/react/overview). An example of how to do so is below:

    ```js
    export const WithSession = ({ children }) => {
      const session = useSession()
      if (typeof children !== 'function') throw new Error()

      return children(session)
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `WithClerk` higher order component has been removed. If you would still like to use this function in the way its implemented, it can be created quickly using Clerk's [custom hooks](/docs/reference/react/overview). An example of how to do so is below:

    ```js
    export const WithClerk = ({ children }) => {
      const clerk = useClerk()
      if (typeof children !== 'function') throw new Error()

      return children(clerk)
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `WithUser` higher order component has been removed. If you would still like to use this function in the way its implemented, it can be created quickly using Clerk's [custom hooks](/docs/reference/react/overview). An example of how to do so is below:

    ```js
    export const WithUser = ({ children }) => {
      const user = useUser()
      if (typeof children !== 'function') throw new Error()

      return children(user)
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `withClerk` higher order function has been removed. If you would still like to use this function in the way its implemented, it can be created quickly using Clerk's [custom hooks](/docs/reference/react/overview). An example of how to do so is below:

    ```js
    function withClerk(Component, displayName) {
      displayName = displayName || Component.displayName || Component.name || 'Component'
      Component.displayName = displayName
      const HOC = (props) => {
        const clerk = useIsomorphicClerkContext()

        if (!clerk.loaded) return null

        return <Component {...props} clerk={clerk} />
      }

      HOC.displayName = `withClerk(${displayName})`
      return HOC
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `withSession` higher order function has been removed. If you would still like to use this function in the way its implemented, it can be created quickly using Clerk's [custom hooks](/docs/reference/react/overview). An example of how to do so is below:

    ```js
    function withSession(Component, displayName) {
      displayName = displayName || Component.displayName || Component.name || 'Component'
      Component.displayName = displayName
      const HOC = (props) => {
        const session = useSessionContext()

        if (!session) return null

        return <Component {...props} session={session} />
      }

      HOC.displayName = `withSession(${displayName})`
      return HOC
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `withUser` higher order function has been removed. If you would still like to use this function in the way its implemented, it can be created quickly using Clerk's [custom hooks](/docs/reference/react/overview). An example of how to do so is below:

    ```js
    function withUser(Component, displayName) {
      displayName = displayName || Component.displayName || Component.name || 'Component'
      Component.displayName = displayName
      const HOC = (props) => {
        const clerk = useUserContext()

        if (!user) return null

        return <Component {...props} user={user} />
      }

      HOC.displayName = `withUser(${displayName})`
      return HOC
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    `MultiSessionAppSupport` is a component that handles the intermediate “undefined” state for multisession apps by unmounting and remounting the components during the session switch (`setActive` call) in order to solve theoretical edge-cases that can arise while switching sessions. It is undocumented and intended only for internal use, so it has been moved to an `/internal` import path. Note that internal imports are not intended for public use, and are outside the scope of semver.

    ```js {{ del: [1], ins: [2] }}
    import { MultiSessionAppSupport } from '@clerk/clerk-react'
    import { MultiSessionAppSupport } from '@clerk/clerk-react/internal'
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `signOutCallback` prop on the [`<SignOutButton />` component](/docs/reference/components/unstyled/sign-out-button) has been removed. Instead, you can use the `redirectUrl` prop. Example below:

    ```jsx {{ del: [[6, 8]], ins: [9] }}
    import { SignOutButton } from '@clerk/clerk-react'

    export const Signout = () => {
      return (
        <SignOutButton
          signOutCallback={() => {
            window.location.href = '/your-path'
          }}
          redirectUrl="/your-path"
        >
          <button>Sign Out</button>
        </SignOutButton>
      )
    }
    ```
  </AccordionPanel>

  <AccordionPanel>
    `setSession` should be replaced with `setActive`. The format of the parameters has changed slightly - `setActive` takes an object where `setSession` took params directly. The `setActive` function also can accept an `organization` param that is used to set the currently [Active Organization](!active-organization). The return signature did not change. Read the [API documentation](/docs/reference/javascript/clerk#set-active) for more detail. This function should be expected to be returned from one of the following Clerk hooks: `useSessionList`, `useSignUp`, or `useSignIn`. Some migration examples:

    ```js {{ prettier: false, del: [1, 4, 7], ins: [2, 5, 8] }}
    await setSession('sessionID', () => void)
    await setActive({ session: 'sessionID', beforeEmit: () => void })

    await setSession(sessionObj)
    await setActive({ session: sessionObj })

    await setSession(sessionObj, () => void)
    await setActive({ session: sessionObj, beforeEmit: () => void })
    ```

    `setActive` also supports setting an [Active Organization](!active-organization):

    ```js {{ prettier: false }}
    await setActive({
      session: 'sessionID',
      organization: 'orgID',
      beforeEmit: () => void,
    })
    await setActive({
      session: sessionObj,
      organization: orgObj,
      beforeEmit: () => void,
    })
    ```
  </AccordionPanel>

  <AccordionPanel>
    Passing a string as an argument to `Organization.create` is no longer possible - instead, pass an object with the `name` property.

    ```js {{ del: [1], ins: [2] }}
    Organization.create('...')
    Organization.create({ name: '...' })
    ```
  </AccordionPanel>

  <AccordionPanel>
    The `Organization.getPendingInvitations()` method has been removed. You can use `Organization.getInvitations` instead.

    ```js {{ del: [1], ins: [2] }}
    Organization.getPendingInvitations()
    Organization.getInvitations({ status: 'pending' })
    ```
  </AccordionPanel>
</Accordion>
