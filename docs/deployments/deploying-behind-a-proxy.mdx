---
title: Deploying a Clerk app behind a proxy
description: Learn how to deploy a Clerk app to a web server using proxies and reverse proxies like nginx or Caddy, or using Docker
---

When deploying a Clerk app beind a proxy, you may need to proxy two headers for Clerk to work correctly. The two headers that you must forward are:

- `X-Forwarded-Host`
- `X-Forwarded-Proto`

## `nginx` configuration example

The following can be added to your `nginx` configuration to forward these two headers to your application.

```nginx
proxy_set_header X-Forwarded-Host $host;
proxy_set_header X-Forwarded-Proto https;
```

## How to test if the headers are forwarded correctly:

You can console log the `X-forwarded-host` and `X-forwarded-proto` to check what the value is. The following example is for Next.js.

```ts
export default clerkMiddleware(
  (auth, req) => {
    console.log('=========================')
    console.log('Request Headers')
    console.log('x-forwarded-host', req.headers.get('x-forwarded-host'))
    console.log('x-forwarded-proto', req.headers.get('x-forwarded-proto'))
    console.log('=========================')
  },
  { debug: debugStatus },
)
```

The `x-forwarded-host` should return the same domain as the one your configured for your Clerk application on the Domains page. If your domain is `clerk.com` then that is the value that should appear in the log. For `x-forwarded-proto` the value needs to be `https`.

Here is an example result:

```log
=========================
Request Headers
x-forwarded-host clerk.com
x-forwarded-proto https
=========================
```

## Non-exhaustive list

The following is a non-exhaustive list that includes some of the hosts and servers that will require this proxying of headers.

- [nginx](https://nginx.org/en/)
- [Caddy](https://caddyserver.com/)
- [Docker](https://www.docker.com/)
- [AWS Amplify](https://amplify.com/)
