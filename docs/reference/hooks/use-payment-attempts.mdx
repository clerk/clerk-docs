---
title: '`usePaymentAttempts()`'
description: Access and manage payment attempts in your React application with Clerk's usePaymentAttempts() hook.
sdk: nextjs, react
---

<Include src="_partials/billing/billing-experimental" />

The `usePaymentAttempts()` hook provides access to the payment attempts associated with a user or organization. It returns a paginated list of payment attempts and includes methods for managing them.

## Examples

### Basic usage

The following example demonstrates how to fetch and display a user's payment attempts.

<If sdk="nextjs">
  ```tsx
  import { usePaymentAttempts } from '@clerk/nextjs/experimental'

  function PaymentAttemptsList() {
    const { data, isLoading } = usePaymentAttempts({
      for: 'user',
      pageSize: 10,
    })

    if (isLoading) {
      return <div>Loading payment attempts...</div>
    }

    if (!data || data.length === 0) {
      return <div>No payment attempts found.</div>
    }

    return (
      <ul>
        {data?.map((attempt) => (
          <li key={attempt.id}>
            Payment #{attempt.id} - {attempt.status}
            <br />
            Amount: {attempt.amount.amountFormatted} on {new Date(attempt.updatedAt).toLocaleString()}
          </li>
        ))}
      </ul>
    )
  }
  ```
</If>

<If sdk="react">
  ```tsx
  import { usePaymentAttempts } from '@clerk/clerk-react/experimental'

  function PaymentAttemptsList() {
    const { data, isLoading } = usePaymentAttempts({
      for: 'user',
      pageSize: 10,
    })

    if (isLoading) {
      return <div>Loading payment attempts...</div>
    }

    if (!data || data.length === 0) {
      return <div>No payment attempts found.</div>
    }

    return (
      <ul>
        {data?.map((attempt) => (
          <li key={attempt.id}>
            Payment #{attempt.id} - {attempt.status}
            <br />
            Amount: {attempt.amount.amountFormatted} on {new Date(attempt.updatedAt).toLocaleString()}
          </li>
        ))}
      </ul>
    )
  }
  ```
</If>

### Infinite pagination

The following example demonstrates how to implement infinite scrolling with payment attempts.

<If sdk="nextjs">
  ```tsx
  import { usePaymentAttempts } from '@clerk/nextjs/experimental'

  function InfinitePaymentAttempts() {
    const { data, isLoading, hasNextPage, fetchNext } = usePaymentAttempts({
      for: 'user',
      infinite: true,
      pageSize: 20,
    })

    if (isLoading) {
      return <div>Loading...</div>
    }

    if (!data || data.length === 0) {
      return <div>No payment attempts found.</div>
    }

    return (
      <div>
        <ul>
          {data?.map((attempt) => (
            <li key={attempt.id}>
              Payment attempt for {attempt.amount.amountFormatted}
              <br />
              Status: {attempt.status}
              <br />
              {attempt.status === 'failed' && attempt.failedAt && (
                <span>Failed At: {new Date(attempt.failedAt).toLocaleString()}</span>
              )}
            </li>
          ))}
        </ul>

        {hasNextPage && <button onClick={() => fetchNext()}>Load more payment attempts</button>}
      </div>
    )
  }
  ```
</If>

<If sdk="react">
  ```tsx
  import { usePaymentAttempts } from '@clerk/clerk-react/experimental'

  function InfinitePaymentAttempts() {
    const { data, isLoading, hasNextPage, fetchNext } = usePaymentAttempts({
      for: 'user',
      infinite: true,
      pageSize: 20,
    })

    if (isLoading) {
      return <div>Loading...</div>
    }

    if (!data || data.length === 0) {
      return <div>No payment attempts found.</div>
    }

    return (
      <div>
        <ul>
          {data?.map((attempt) => (
            <li key={attempt.id}>
              Payment attempt for {attempt.amount.amountFormatted}
              <br />
              Status: {attempt.status}
              <br />
              {attempt.status === 'failed' && attempt.failedAt && (
                <span>Failed At: {new Date(attempt.failedAt).toLocaleString()}</span>
              )}
            </li>
          ))}
        </ul>

        {hasNextPage && <button onClick={() => fetchNext()}>Load more payment attempts</button>}
      </div>
    )
  }
  ```
</If>

### Payment attempts history table

The following example demonstrates how to use `usePaymentAttempts()` to display a detailed payment history table.

<If sdk="nextjs">
  ```tsx
  import { usePaymentAttempts } from '@clerk/nextjs/experimental'

  function PaymentAttemptsHistory() {
    const { data, isLoading } = usePaymentAttempts({ for: 'user' })

    if (isLoading) {
      return <div>Loading payment attempts...</div>
    }

    if (!data || data.length === 0) {
      return <div>No payment attempts found.</div>
    }

    const getStatusColor = (status: string) => {
      switch (status) {
        case 'paid':
          return 'green'
        case 'failed':
          return 'red'
        case 'pending':
          return 'orange'
        default:
          return 'gray'
      }
    }

    return (
      <table>
        <thead>
          <tr>
            <th>Payment ID</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Date</th>
            <th>Payment Method</th>
          </tr>
        </thead>
        <tbody>
          {data?.map((attempt) => (
            <tr key={attempt.id}>
              <td>{attempt.id}</td>
              <td>{attempt.amount.amountFormatted}</td>
              <td style={{ color: getStatusColor(attempt.status) }}>{attempt.status}</td>
              <td>{attempt.paidAt ? new Date(attempt.paidAt).toLocaleDateString() : '-'}</td>
              <td>
                {attempt.paymentSource.cardType} ****{attempt.paymentSource.last4}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    )
  }
  ```
</If>

<If sdk="react">
  ```tsx
  import { usePaymentAttempts } from '@clerk/clerk-react/experimental'

  function PaymentAttemptsHistory() {
    const { data, isLoading } = usePaymentAttempts({ for: 'user' })

    if (isLoading) {
      return <div>Loading payment attempts...</div>
    }

    if (!data || data.length === 0) {
      return <div>No payment attempts found.</div>
    }

    const getStatusColor = (status: string) => {
      switch (status) {
        case 'paid':
          return 'green'
        case 'failed':
          return 'red'
        case 'pending':
          return 'orange'
        default:
          return 'gray'
      }
    }

    return (
      <table>
        <thead>
          <tr>
            <th>Payment ID</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Date</th>
            <th>Payment Method</th>
          </tr>
        </thead>
        <tbody>
          {data?.map((attempt) => (
            <tr key={attempt.id}>
              <td>{attempt.id}</td>
              <td>{attempt.amount.amountFormatted}</td>
              <td style={{ color: getStatusColor(attempt.status) }}>{attempt.status}</td>
              <td>{attempt.paidAt ? new Date(attempt.paidAt).toLocaleDateString() : '-'}</td>
              <td>
                {attempt.paymentSource.cardType} ****{attempt.paymentSource.last4}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    )
  }
  ```
</If>

## Properties

`usePaymentAttempts()` accepts a single optional object with the following properties:

<Typedoc src="shared/hook-params" />

## Returns

`usePaymentAttempts()` returns an object with the following properties:

<Typedoc src="shared/use-payment-attempts-return" />
