---
title: Restrict access with Permissions
description: A collection of utility functions and components in order to allow developers to perform authorization checks.
---

# Restrict access with Permissions

Clerk provides two kinds of helpers for authorization:

- **`protect` helpers** are opinionated and will not process unauthorized users, either by not rendering children or by throwing errors. [`<Protect />` component](/docs/components/protect) and the experimental `auth().protect` fall into this category.
- **`has` helpers** are more composable and flexible. They let you check to see what Permissions a user *has*. You can decide what to do if the user lacks the required Permissions.

## Authorization in Client Components

The examples bellow work for both SSR and CSR. Examples are written for Nextjs App Router but they are supported any React meta framework (f.e. Remix, Gatsby).

<Tabs type="framework" items={["Nextjs with Protect", "Nexjts with useAuth().has"]}>
    The following snippet uses Clerk's `<Protect />` component to only render the form for users with the `org:team_settings:manage` Permissions.
    <Tab>
    ```tsx filename="/app/dashboard/settings/form.tsx"
      'use client';
      import { Protect } from "@clerk/nextjs";

      export function SettingsForm(){
        return (
          <Protect
            permission="org:team_settings:manage"
            fallback={<p>You are not allowed to see this section.</p>}
          >
            <form>
              ....
            </form>
          </Protect>
        )
      }
      ```
  </Tab>

  <Tab>
      The [`useAuth()`](/docs/references/react/use-auth) hook can help you access what permissions a user has using `has`. In the below snippet, `has({ permission: "org:team_settings:manage" })` returns `false` if the user does not have the `org:team_settings:manage` Permission.
    ```tsx filename="/app/dashboard/settings/form.tsx"
      'use client';
      import { useAuth } from "@clerk/nextjs";

      export function SettingsForm(){
        const { has } = useAuth();
        const canManageSettings = has({ permission: "org:team_settings:manage" });

        if(!canManageSettings) return null;

        return (
          <form>
            //...
          </form>
        )
      }
      ```
  </Tab>
</Tabs>

## Authorization in React Server Components

<Tabs type="framework" items={["RSC with Protect", "RSC with auth().has", "RSC with auth().protect"]}>
  <Tab>
      The following snippet uses `<Protect />`'s `condition` prop to conditionally render its children if the user has either `org:team_settings:manage` or `org:team_settings:read` Permissions.
    ```tsx filename="/app/dashboard/settings/layout.tsx"
      import type { PropsWithChildren } from "react";
      import { Protect } from "@clerk/nextjs";

      export default function SettingsLayout(props: PropsWithChildren){
        return (
          <Protect
            condition={has => has({permission: "org:team_settings:manage"}) || has({permission: "org:team_settings:read"})}
          >
            {props.children}
          </Protect>
        )
      }
      ```
  </Tab>

  <Tab>
      The following snippet uses `has` to inspect a user's Permissions granularly. If the user doesn't have both `org:team_settings:manage` and `org:team_settings:read` Permissions, the component returns `null` instead of rendering its children.
    ```tsx filename="/app/dashboard/settings/layout.tsx"
      import type { PropsWithChildren } from "react";
      import { auth } from "@clerk/nextjs/server";

      export default function SettingsLayout(props: PropsWithChildren){
        const { has } = auth()

        const canManage = has({permission:"org:team_settings:manage"});
        const canRead = has({permission: "org:team_settings:read"});
        const canAccessSettings = canManage || canRead;

        if(!canAccessSettings) return null;

        return props.children
      }
      ```
  </Tab>

  <Tab>
    <Callout>
      `auth().protect()` will throw a `notFound` Nextjs error if authorization checks fail
    </Callout>
    ```tsx filename="/app/dashboard/settings/layout.tsx"
      import type { PropsWithChildren } from "react";
      import { auth } from "@clerk/nextjs/server";

      export default function SettingsLayout(props: PropsWithChildren){
        const { userId } = auth().protect(
            has => has({permission: "org:team_settings:manage"}) ||
              has({permission: "org:team_settings:read"}))

        return props.children
      }
      ```
  </Tab>
</Tabs>

## Authorization in endpoints

<Tabs type="framework" items={["Nextjs Server Actions", "Nexjts Route Handlers", "Nextjs API Routes"]}>
  <Tab>
    ```tsx
      import { auth } from "@clerk/nextjs/server";

      export default function ServerComponent() {
        async function myAction() {
          'use server'
          const { has } = auth();

          const canManage = has({permission:"org:team_settings:manage"});
          const canRead = has({permission: "org:team_settings:read"});
          const canAccessSettings = canManage || canRead;
          ...
          // Perform a DB operation ...
        }
      }
      ```
  </Tab>

  <Tab>
    <Callout>
      `auth().protect()` will throw a `notFound` Nextjs error if authorization checks fail
    </Callout>
    #### Using `auth().protect`
    ```tsx
      import { useAuth } from "@clerk/nextjs";

      export const POST = () => {
        const { userId } = auth().protect({
          permission: "org:team_settings:manage"
        })
        return users.createTeam(userId);
      }
      ```
    #### Using `auth().has`
    ```tsx
      import { useAuth } from "@clerk/nextjs";

      export const GET = () => {
        const { userId, has } = auth();

        if(!userId){
          return Response.json({error: "Unathorized"}, {status: 401})
        }

        if(!has({permission: "org:team_settings:read"})){
          return Response.json({error: "Forbidden"}, {status: 403})
        }

        return users.getTeams(userId)
      }
      ```
  </Tab>

  <Tab>
    ```tsx
      import { getAuth } from "@clerk/nextjs/server";

      export default async function handler(req: NextApiRequest) {
        const { userId, has } = await getAuth(req);
        if (!userId) return res.status(401);

        if(!has({permission: "org:team_settings:read"})) return res.status(403)

        return users.getTeams(userId)
      }

      ```
  </Tab>
</Tabs>

## Authorization in Remix Loaders

<CodeBlockTabs type="framework" options={["Remix"]}>
```tsx
export const loader: LoaderFunction = async args => {
  const { has } = await getAuth(args);

  if(has({permission: "org:team_settings:manage"})){
    return redirect('/request-access');
  }
  return {};
};

export default function Settings() {
  return (
    <div>
      <h1>Settings Page</h1>
    </div>
  );
}
```
</CodeBlockTabs>

## Authorization in JS SDK

If you are not using React or any of the meta-frameworks we support, there's a good chance that you are using Clerk.js directly. In that case the following snippet can help.

<CodeBlockTabs type="framework" options={["JavaScript"]}>
```tsx
import Clerk from '@clerk/clerk-js'

const clerk = new Clerk(...)
await clerk.load(...)

const canManageSettings = clerk.session.checkAuthorization({
  permission: "org:team_settings:manage"
})
```
</CodeBlockTabs>
