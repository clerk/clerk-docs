---
title: Syncing users skill
description: Sync Clerk users to your database via webhooks with Prisma, Drizzle, or Supabase.
---

The `syncing-users` skill helps AI agents set up webhooks to sync Clerk users, organizations, and events to your database.

## Installation

```bash
npx skills add clerk/skills --skill syncing-users
```

## Why sync users?

Clerk is the source of truth for authentication, but you need user data in your database for:

- Relating users to app data (posts, orders, comments)
- Complex queries joining user data
- Storing additional application-specific metadata

## Example prompts

- "Sync Clerk users to my Prisma database"
- "Set up a webhook handler for user events"
- "Add organization sync to my Drizzle schema"
- "Create a Supabase sync for Clerk users"

## Webhook events

| Event | When it fires |
| --- | --- |
| `user.created` | New user signs up |
| `user.updated` | User updates profile |
| `user.deleted` | User account deleted |
| `organization.created` | New organization created |
| `organizationMembership.created` | User joins organization |

## Common patterns

### Webhook handler (Next.js)

```ts {{ filename: 'app/api/webhooks/clerk/route.ts' }}
import { Webhook } from 'svix'
import { headers } from 'next/headers'
import { WebhookEvent } from '@clerk/nextjs/server'

export async function POST(req: Request) {
  const WEBHOOK_SECRET = process.env.CLERK_WEBHOOK_SIGNING_SECRET

  const headerPayload = await headers()
  const svix_id = headerPayload.get('svix-id')
  const svix_timestamp = headerPayload.get('svix-timestamp')
  const svix_signature = headerPayload.get('svix-signature')

  const body = await req.text()

  const wh = new Webhook(WEBHOOK_SECRET)
  let evt: WebhookEvent

  try {
    evt = wh.verify(body, {
      'svix-id': svix_id,
      'svix-timestamp': svix_timestamp,
      'svix-signature': svix_signature,
    }) as WebhookEvent
  } catch (err) {
    return new Response('Error verifying webhook', { status: 400 })
  }

  if (evt.type === 'user.created') {
    const { id, email_addresses, first_name, last_name } = evt.data
    // Sync to your database
    await db.user.create({
      data: {
        clerkId: id,
        email: email_addresses[0]?.email_address,
        firstName: first_name,
        lastName: last_name,
      },
    })
  }

  return new Response('OK', { status: 200 })
}
```

### Prisma schema

```prisma {{ filename: 'prisma/schema.prisma' }}
model User {
  id        String   @id @default(cuid())
  clerkId   String   @unique
  email     String   @unique
  firstName String?
  lastName  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

## Setup steps

1. Create webhook endpoint in your app
2. Go to [Clerk Dashboard](https://dashboard.clerk.com/last-active?path=webhooks) > Webhooks
3. Add your endpoint URL
4. Select events to subscribe to
5. Copy the signing secret to `CLERK_WEBHOOK_SIGNING_SECRET`

## Common pitfalls

- **Use raw text body** for signature verification - `await req.text()` not `req.json()`
- **Pass all svix headers** - `svix-id`, `svix-timestamp`, `svix-signature`
- **Handle all event types** - `user.created`, `user.updated`, `user.deleted`
- **Use upsert pattern** - events may arrive out of order
- **Return fast** - queue long operations, webhooks have timeouts

## Related skills

- [managing-orgs](/docs/guides/ai/skills/managing-orgs) - Organization webhook events

## Source code

View the skill source on [GitHub](https://github.com/clerk/skills/tree/main/skills/syncing-users).
