<Tabs items={["Next.js", "Astro", "Express", "JS Backend SDK", "React Router", "Tanstack React Start"]}>
  <Tab>
    ```tsx {{ filename: 'app/api/example/route.ts' }}
    import { clerkClient } from '@clerk/nextjs/server'

    // Initialize the JS Backend SDK
    // This varies depending on the SDK you're using
    // https://clerk.com/docs/js-backend/getting-started/quickstart
    const client = await clerkClient()

    export async function GET(req: Request) {
      // Use the `authenticateRequest()` method to verify the token
      const { isAuthenticated } = await client.authenticateRequest(req, {
        authorizedParties: ['https://example.com'],
        jwtKey: process.env.CLERK_JWT_KEY,
      })

      // Protect the route from unauthenticated users
      if (!isAuthenticated) {
        return Response.json({ status: 401 })
      }

      // Add logic to perform protected actions

      return Response.json({ message: 'This is a reply' })
    }
    ```
  </Tab>

  <Tab>
    ```tsx {{ filename: 'src/api/example.ts' }}
    import { clerkClient } from '@clerk/astro/server'
    import type { APIRoute } from 'astro'

    export const GET: APIRoute = async (context) => {
      // Use the `authenticateRequest()` method to verify the token
      const { isAuthenticated } = await clerkClient(context).authenticateRequest(context.request, {
        authorizedParties: ['https://example.com'],
        jwtKey: process.env.CLERK_JWT_KEY,
      })

      // Protect the route from unauthenticated users
      if (!isAuthenticated) {
        return Response.json({ status: 401 })
      }

      // Add logic to perform protected actions

      return Response.json({ message: 'This is a reply' })
    }
    ```
  </Tab>

  <Tab>
    ```js {{ filename: 'index.js' }}
    import { createClerkClient } from '@clerk/express'
    import express from 'express'

    const app = express()
    const clerkClient = createClerkClient({ secretKey: process.env.CLERK_SECRET_KEY })

    app.get('/user', async (req, res) => {
      const { isAuthenticated } = await clerkClient.authenticateRequest(req, {
        authorizedParties: ['https://example.com'],
        jwtKey: process.env.CLERK_JWT_KEY,
      })

      if (!isAuthenticated) {
        res.status(401).json({ error: 'User not authenticated' })
      }

      // Add logic to perform protected actions

      // Return the Backend User object
      res.json({ message: 'This is a reply' })
    })
    ```
  </Tab>

  <Tab>
    If you are using the [JS Backend SDK](/docs/js-backend/getting-started/quickstart) on its own, you need to provide the `secretKey` and `publishableKey` to `createClerkClient()` so that it is passed to `authenticateRequest()`. You can set these values as [environment variables](/docs/guides/development/clerk-environment-variables#clerk-publishable-and-secret-keys) and then pass them to the function.

    ```tsx
    import { createClerkClient } from '@clerk/backend'

    // Initialize the JS Backend SDK
    // This varies depending on the SDK you're using
    // https://clerk.com/docs/js-backend/getting-started/quickstart
    const clerkClient = createClerkClient({
      secretKey: process.env.CLERK_SECRET_KEY,
      publishableKey: process.env.CLERK_PUBLISHABLE_KEY,
    })

    export async function GET(req: Request) {
      // Use the `authenticateRequest()` method to verify the token
      const { isAuthenticated } = await clerkClient.authenticateRequest(req, {
        authorizedParties: ['https://example.com'],
        jwtKey: process.env.CLERK_JWT_KEY,
      })

      // Protect the route from unauthenticated users
      if (!isAuthenticated) {
        return Response.json({ status: 401 })
      }

      // Add logic to perform protected actions

      return Response.json({ message: 'This is a reply' })
    }
    ```
  </Tab>

  <Tab>
    ```tsx {{ filename: 'app/routes/example.tsx' }}
    import { redirect } from 'react-router'
    import { clerkClient } from '@clerk/react-router/server'
    import type { Route } from './+types/example'

    export async function loader(args: Route.LoaderArgs) {
      // Use the `authenticateRequest()` method to verify the token
      const { isAuthenticated } = await clerkClient(args).authenticateRequest(args.request, {
        authorizedParties: ['https://example.com'],
        jwtKey: process.env.CLERK_JWT_KEY,
      })

      if (!isAuthenticated) {
        return redirect('/sign-in?redirect_url=' + args.request.url)
      }

      // Add logic to perform protected actions

      return Response.json({ message: 'This is a reply' })
    }
    ```
  </Tab>

  <Tab>
    ```tsx {{ filename: 'app/routes/api/example.tsx' }}
    import { createFileRoute } from '@tanstack/react-router'
    import { clerkClient } from '@clerk/tanstack-react-start/server'

    export const ServerRoute = createFileRoute('/api/example')({
      server: {
        handlers: {
          GET: async ({ request }) => {
            // Use the `authenticateRequest()` method to verify the token
            const { isAuthenticated } = await clerkClient().authenticateRequest(request, {
              authorizedParties: ['https://example.com'],
              jwtKey: process.env.CLERK_JWT_KEY,
            })

            if (!isAuthenticated) {
              return Response.json({ status: 401 })
            }

            // Add logic to perform protected actions

            return Response.json({ message: 'This is a reply' })
          },
        },
      },
    })
    ```
  </Tab>
</Tabs>
