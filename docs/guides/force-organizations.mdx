---
title: Avoid personal account and force organizations in your app
description: Learn how to avoid personal account and force organizations in your app
---

<TutorialHero
    beforeYouStart={[
        {
            title: "Set up a Next.js + Clerk application",
            link: "https://clerk.com/docs/quickstarts/nextjs"
        },
        {
            title: "Enable organizations for your instance",
            link: "https://clerk.com/docs/organizations/overview"
        }
    ]}
>
    - Remove Personal Account from `<OrganizationList/>` and `<OrganizationSwitcher/>`.
    - Set an active organization with `setActive`.
    - Limit access for users with active organizations only.
</TutorialHero>

<Callout type="info">
    A user's personal account cannot be disabled. It can only be hidden.
</Callout>

<Steps>

### Remove Personal Account from UI components

Our prebuilt UI components can accept props in order to hide any reference to a users personal account. Such components are [`<OrganizationList />`](/docs/components/organization/organization-list) and [`<OrganizationSwitcher />`](/docs/components/organization/organization-switcher). Both of them accept the `hidePersonal` props which accepts a boolean. For the case of forcing organizations you should pass `true` to this prop.

<Tabs type="router" items={["OrganizationList", "OrganizationSwitcher"]}>
    <Tab>
```tsx
import { OrganizationList } from '@clerk/nextjs'

export default function OrganizationListPage() {
  return (
    <OrganizationList
        hidePersonal={true}
        {...}
    />
  );
};
```
    </Tab>

    <Tab>
```tsx
import { OrganizationSwitcher } from '@clerk/nextjs'

export default function Sidebar() {
  return (
    <OrganizationSwitcher
        hidePersonal={true}
        {...}
    />
  );
};
```
    </Tab>
</Tabs>

### Set an active organization

<Callout type="info">
    Setting an active organization can only be performed in the client
</Callout>

With clerk, a user can have many organization memberships. That means they can could have joined both Organization A and Organization B, but only one of them can be active at a time.

A session will always include an organizationId via the [`AuthenticationObject`](/docs/references/nextjs/authentication-object#example-with-active-organization), we can use this in order to [detect](#detect-an-active-organization) if a user has an "active organizations".

Clerk UI Components will automatically set an organization as active each time the user creates an organization, accepts an invitation or selects a membership from the switcher. For custom flows when developers want to set an organization as active you can use the [`setActive`](#) utility

<Tabs type="router" items={["Custom flow with setActive", "Sync with url with setActive"]}>
    <Tab>
```tsx
"use client"

import { useOrganizationList } from "@clerk/nextjs";
import React from "react";
 
export const CustomSwitcher = () => {
  const { isLoaded, setActive, userMemberships } = useOrganizationList({
    userMemberships: {
      infinite: true,
    },
  });
 
  if (!isLoaded) {
    return <>Loading</>;
  }
 
  return (
    <>
      <ul>
        {userMemberships.data?.map((mem) => (
          <li key={mem.id}>
            <span>{mem.organization.name}</span>
            <button
              onClick={() => setActive({ organization: mem.organization.id })}
            >
              Select
            </button>
          </li>
        ))}
      </ul>
 
      <button
        disabled={!userMemberships.hasNextPage}
        onClick={() => userMemberships.fetchNext()}
      >
        Load more
      </button>
    </>
  );
};

```
    </Tab>

    <Tab>
```tsx filename="app/[orgId]/sync-active-organization.tsx"
"use client"

import { useEffect } from "react"
import { redirect, useParams } from "next/navigation"
import { useAuth, useOrganizationList } from "@clerk/nextjs"

export function SyncActiveOrganization() {
  const { orgId: urlOrgId } = useParams() as { orgId: string }
  const { orgId } = useAuth()
  const { setActive, isLoaded } = useOrganizationList()

  useEffect(() => {
    if (!isLoaded) return

    if (!urlOrgId?.startsWith("org_")) {
      redirect("/")
      return
    }

    if (urlOrgId && urlOrgId !== orgId) {
      void setActive({ organization: urlOrgId })
    }
  }, [orgId, isLoaded, setActive, urlOrgId])

  return null
}
```
    </Tab>
</Tabs>

### Detect an active organization

<Tabs type="router" items={["App Router Server Component", "App Router Client Component"]}>
    <Tab>
```tsx
import { auth } from '@clerk/nextjs/server'

export default function Layout() {
  const {orgId} = auth()
  const hasActiveOrg = orgId !== null
  ...
}
```
    </Tab>

    <Tab>
```tsx
"use client"
import { useAuth } from '@clerk/nextjs'

export default function Layout() {
  const {orgId} = useAuth()
  const hasActiveOrg = orgId !== null
  ...
}
```
    </Tab>
</Tabs>


### Limit access for users with active organizations only

<Callout type="info">
  **How users can end up in this state ?**
  - User just created an account, not by accepting an invitation, and hasnâ€™t created an organization yet
  - User has joined or created multiple organizations and leaves or deletes the active organization. 
</Callout>

Based on your usecase you can either decide to limit users in the entire app or a specific part of it. For example a B2B application might need to limit users with active organization for the entire app, whereas a B2B2C application would only limit the `/dashboard` path to users with active organization.

We can use the [`authMiddleware`](/docs/references/nextjs/auth-middleware) or we can use an `App Router Layout` to limit our entire application for users with an active organization.

<Tabs type="router" items={["App Router", "Pages Router"]}>
    <Tab>

```tsx filename="app/(with-active-organization)/layout.tsx"
import { OrganizationList } from "@clerk/nextjs"
import { auth } from "@clerk/nextjs/server"
import { PropsWithChildren } from "react"

export default function RequiredActiveOrgLayout(props: {afterCreateOrganizationUrl?: string, afterSelectOrganizationUrl?: string}) {
  const { orgId } = auth()

  if (orgId) {
    return props.children
  }

  return (
    <section>
      <h1>Welcome</h1>
      <p>
        This part of the application requires the user to select an
        organization in order to proceed. If you are not part of an
        organization, you can accept an invitation or create your own
        organization
      </p>
      <OrganizationList 
        hidePersonal={true} 
        afterCreateOrganizationUrl={afterCreateOrganizationUrl}
        afterSelectOrganizationUrl={afterSelectOrganizationUrl}
      />  
    </section>
  )
}
```

    </Tab>

    <Tab>

    See the complete example of the middleware script ([here](/docs/references/nextjs/auth-middleware#use-after-auth-for-fine-grained-control))
```tsx filename="middleware.ts"
import { authMiddleware, redirectToSignIn } from '@clerk/nextjs';
 
export default authMiddleware({
  afterAuth(auth, req, evt) {
    ...
    // Redirect logged in users to organization selection page if they are not active in an organization
    if(auth.userId && !auth.orgId && req.nextUrl.pathname !== "/org-selection"){
      const searchParams = new URLSearchParams({
        redirectUrl: req.url
      })
      const orgSelection = new URL(`/org-selection?${searchParams.toString()}`, req.url);
      return NextResponse.redirect(orgSelection)
    }
    ...
  }
});
```

```tsx filename="pages/org-selection.tsx"
import { OrganizationList } from "@clerk/nextjs"
import { useRouter } from "next/router";

export default function OrganizationSelection() {
  const { query } = useRouter()
  return (
    <section>
      <h1>Welcome</h1>
      <p>
        This part of the application requires the user to select an
        organization in order to proceed. If you are not part of an
        organization, you can accept an invitation or create your own
        organization
      </p>
      <OrganizationList
        hidePersonal={true}
        afterCreateOrganizationUrl={query.redirectUrl) ?? "/"}
        afterSelectOrganizationUrl={query.redirectUrl) ?? "/"}
      />
    </section>
  )
}
```
    </Tab>
</Tabs>

</Steps>

## Finished ðŸŽ‰
