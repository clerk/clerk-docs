---
title: Build a custom email or SMS OTP authentication flow
description: Learn how build a custom email or SMS one time code (OTP) authentication flow using the Clerk API.
sdk: nextjs, react, expo, js-frontend, react-router, tanstack-react-start, ios, android
---

<Include src="_partials/custom-flows-callout" />

<If sdk={["nextjs", "react", "expo", "js-frontend", "react-router", "tanstack-react-start"]}>
  > [!IMPORTANT]
  > This guide applies to the following Clerk SDKs:
  >
  > - `@clerk/react` v6 or higher
  > - `@clerk/nextjs` v7 or higher
  > - `@clerk/expo` v3 or higher
  > - `@clerk/react-router` v3 or higher
  > - `@clerk/tanstack-react-start` v0.26.0 or higher
  >
  > If you're using an older version of one of these SDKs, or are using the legacy API, refer to the [legacy API documentation](/docs/guides/development/custom-flows/authentication/legacy/email-password).
</If>

Clerk supports passwordless authentication, which lets users sign in and sign up without having to remember a password. Instead, users receive a one-time password (OTP), also known as a one-time code, via email or SMS, which they can use to authenticate themselves.

This guide will walk you through how to build a custom SMS OTP sign-up and sign-in flow. The process for using email OTP is similar, and the differences will be highlighted throughout.

<Include src="_partials/custom-flows/phone-number" />

<Steps>
  ## Enable SMS OTP

  To use SMS OTP, you first need to enable it for your application.

  1. In the Clerk Dashboard, navigate to the [**User & authentication**](https://dashboard.clerk.com/last-active?path=user-authentication/user-and-authentication) page.
  1. Select the **Phone** tab and enable **Sign-up with phone** and **Sign-in with phone** and keep the default settings.

  ## Sign-up flow

  To sign up a user using an OTP, you must:

  <If sdk={["nextjs", "react", "expo", "js-frontend", "react-router", "tanstack-react-start"]}>
    1. Initiate the sign-up process by collecting the user's phone number with the [`signUp.create()`](/docs/reference/javascript/sign-up-future#create) method.
    1. Send a one-time code to the provided phone number for verification with the [`signUp.verifications.sendPhoneCode()`](/docs/reference/javascript/sign-up-future#verifications-send-phone-code) method.
    1. Collect the one-time code and verify it with the [`signUp.verifications.verifyPhoneCode()`](/docs/reference/javascript/sign-up-future#verifications-verify-phone-code) method.
    1. If the phone number verification is successful, finalize the sign-up with the [`signUp.finalize()`](/docs/reference/javascript/sign-up-future#finalize) method to create the user and set the newly created session as the active session.

    <Tabs items={["Next.js"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-sms-otp/sign-up-nextjs" />
      </Tab>
    </Tabs>

    To create a sign-up flow for email OTP, use the [`signUp.emailCode.sendCode()`](/docs/reference/javascript/sign-up-future) and [`signUp.emailCode.verifyCode()`](/docs/reference/javascript/sign-up-future) methods. These methods work the same way as their phone number counterparts do in the previous example. You can find all available methods in the [`SignUpFuture`](/docs/reference/javascript/sign-up-future) object documentation.
  </If>

  <If sdk={["ios", "android"]}>
    1. Initiate the sign-up process by collecting the user's identifier, which for this example is a phone number.
    1. Prepare the verification, which sends a one-time code to the given identifier.
    1. Attempt to complete the verification with the code the user provides.
    1. If the verification is successful, set the newly created session as the active session.

    <Tabs items={["iOS", "Android"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-sms-otp/sign-up-ios" />
      </Tab>

      <Tab>
        <Include src="_partials/custom-flows/email-sms-otp/sign-up-android" />
      </Tab>
    </Tabs>

    To create a sign-up flow for email OTP, use the [`prepareEmailAddressVerification`](/docs/reference/javascript/sign-up#prepare-email-address-verification) and [`attemptEmailAddressVerification`](/docs/reference/javascript/sign-up#attempt-email-address-verification). These helpers work the same way as their phone number counterparts do in the previous example. You can find all available methods in the [`SignUp`](/docs/reference/javascript/sign-in) object documentation.
  </If>

  ## Sign-in flow

  To authenticate a user with an OTP, you must:

  <If sdk={["nextjs", "react", "expo", "js-frontend", "react-router", "tanstack-react-start"]}>
    1. Initiate the sign-in process by calling the [`signIn.phoneCode.sendCode()`](/docs/reference/javascript/sign-in-future#phone-code-send-code) method using the identifier provided, which for this example is a phone number.
    1. Verify the phone code provided by the user with the [`signIn.phoneCode.verifyCode()`](/docs/reference/javascript/sign-in-future#phone-code-verify-code) method.
    1. If the attempt is successful, finalize the sign-in with the [`signIn.finalize()`](/docs/reference/javascript/sign-in-future#finalize) method to set the newly created session as the active session.

    <Tabs items={["Next.js"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-sms-otp/sign-in-nextjs" />
      </Tab>
    </Tabs>

    To create a sign-in flow for email OTP, use the [`signIn.emailCode.sendCode()`](/docs/reference/javascript/sign-in-future#email-code-send-code) and [`signIn.emailCode.verifyCode()`](/docs/reference/javascript/sign-in-future#email-code-verify-code) methods. These methods work the same way as their phone number counterparts do in the previous example. You can find all available methods in the [`SignInFuture`](/docs/reference/javascript/sign-in-future) object documentation.
  </If>

  <If sdk={["ios", "android"]}>
    1. Initiate the sign-in process by creating a `SignIn` using the identifier provided, which for this example is a phone number.
    1. Prepare the first factor verification.
    1. Attempt verification with the code the user provides.
    1. If the attempt is successful, set the newly created session as the active session.

    <Tabs items={["iOS", "Android"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-sms-otp/sign-in-ios" />
      </Tab>

      <Tab>
        <Include src="_partials/custom-flows/email-sms-otp/sign-in-android" />
      </Tab>
    </Tabs>

    To create a sign-in flow for email OTP, pass the value `email_code` as the first factor strategy. You can find all available methods in the [`SignIn`](/docs/reference/javascript/sign-in) object documentation.
  </If>
</Steps>
