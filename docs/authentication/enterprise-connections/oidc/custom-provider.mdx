---
title: Add a custom OpenID Connect (OIDC) Provider as an enterprise connection
description: Learn how to integrate a custom OIDC provider with Clerk for Enterprise SSO.
---

<TutorialHero
  beforeYouStart={[
    {
      title: "Add the Enhanced Authentication add-on to your Pro plan",
      link: "/pricing",
      icon: "plus-circle",
    },
    {
      title: "Enable email address as an identifier for your app",
      link: "/docs/authentication/configuration/sign-up-sign-in-options#identifiers",
      icon: "key",
    },
  ]}
>
  - Add a custom OIDC provider to authenticate users with Enterprise SSO
</TutorialHero>

This guide explains how to use a custom [OpenID Connect (OIDC)](https://openid.net/developers/how-connect-works) provider to authenticate users via Enterprise SSO.

To make the setup process easier, it's recommended to keep two browser tabs open: one for the [Clerk Dashboard](https://dashboard.clerk.com/last-active?path=user-authentication/sso-connections) and one for your Identity Provider (IdP).

<Steps>
  ### Set up an enterprise connection in Clerk

  1. In the Clerk Dashboard, navigate to the [**SSO Connections**](https://dashboard.clerk.com/last-active?path=user-authentication/sso-connections) page.
  1. Select **Add connection** and select **For specific domains**.
  1. Under **Third party**, select **OpenID Connect (OIDC)**.
  1. Add the **Name** of the connection.
  1. Add the **Key** of the provider. This is the provider's unique identifier (cannot be changed after creation).
  1. Add the **Specific Domain** that you want to allow this connection for. This is the domain of the users you want to allow to sign in to your app.
  1. Select **Add connection**. You will be redirected to the connection's configuration page.

  ### Configure your IdP

  1. If necessary, create a new app in your IdP.
  1. In the Clerk Dashboard, navigate to the connection's settings page.
  1. Copy the **Authorized redirect URI**.
  1. Add the value to your IdP's whitelisted URLs.

  ### Set the Discovery Endpoint, Client ID, and Client Secret in Clerk

  Most IdPs provide a **Discovery Endpoint** to retrieve metadata about an OIDC provider. If your IdP doesn't offer this endpoint or if you need greater control over the setup process, select **Use Manual Configuration** in the **Identity Provider Configuration** section to manually configure the connection.

  1. In the Clerk Dashboard, navigate to the connection's settings page.
  1. Copy your application's **Discovery Endpoint**, **Client ID**, and **Client Secret**.
  1. In the connection's settings page in the Clerk Dashboard, under **Identity Provider Configuration**, paste the values in their respective fields.
  1. Under **Scopes**, add the minimum required scopes based on the IdP's documentation if needed. Common OIDC scopes include `openid`, `email`, and `profile`.
  1. Select **Save**.

  ### Configure attribute mapping (optional)

  Attribute mapping allows you to map the IdP's claims with Clerk's user properties such as the `email_verified`. OIDC Enterprise connections require the [`email_verified` claim](https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims:~:text=Section%C2%A05.7.-,email_verified,-boolean) to verify email ownership. However, some IdPs, such as Microsoft Azure Active Directory, might not return this claim or use a non-standard format.

  To enable attribute mapping:

  1. In the Clerk Dashboard, navigate to the **Connection** tab of the connection's settings page.
  1. In the **Attribute Mapping** section, under the **Email address verified** field:

  - If the IdPs that provide the value, enter `email_verified`.
  - For IdPs that do not provide the value, enter `xms_edov`.

  1. Set **Default value** to **True**.
  1. Select **Save**.

  > [!WARNING]
  > If the IdP doesn't return this claim, you can either leave the **Email address verified** field blank or set the **Default value** to `True`. This should only be done if you fully trust the IdP, as it can expose your app to [OAuth attacks](https://www.descope.com/blog/post/noauth).
  >
  > For Microsoft Azure Active Directory connections: Use the [`xms_edov`](https://learn.microsoft.com/en-us/entra/identity-platform/migrate-off-email-claim-authorization#using-the-xms_edov-optional-claim-to-determine-email-verification-status-and-migrate-users) claim to verify email ownership, as Microsoft might not return the standard `email_verified` claim.

  ### Allow additional identifiers (optional)

  User profile information is sourced from the IdP. To allow users to add new identifiers (e.g., email address or phone number) to their profiles:

  1. Navigate to the **Advanced** tab of the connection's configuration page.
  1. Enable **Allow additional identifiers**.
  1. Select **Save**.

  ### Enable the connection for Clerk

  To make the connection available for your users to authenticate with:

  To make the connection available for your users to authenticate with:

  1. Navigate back to the Clerk Dashboard where you should still have the connection's configuration page open. If not, navigate to the [**SSO connections**](https://dashboard.clerk.com/last-active?path=user-authentication/sso-connections) page and select the connection.
  1. At the top of the page, toggle on **Enable connection** and select **Save**.

  ### Test your connection

  The simplest way to test your enterprise connection is to visit your Clerk app's [Account Portal](/docs/customization/account-portal/overview), which is available for all Clerk apps out-of-the-box.

  1. In the Clerk Dashboard, navigate to the [**Account Portal**](https://dashboard.clerk.com/last-active?path=account-portal) page.
  1. Next to the **Sign-in** URL, select **Visit**. The URL should resemble:
     - **For development** – `https://your-domain.accounts.dev/sign-in`
     - **For production** – `https://accounts.your-domain.com/sign-in`
  1. Sign in with your IdP account.
</Steps>
