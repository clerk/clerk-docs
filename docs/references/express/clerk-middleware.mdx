---
title: '`clerkMiddleware()`'
description: The clerkMiddleware() function checks the request's cookies and headers for a session JWT and if found, attaches the Auth object to the request object under the auth key.
---

The `clerkMiddleware()` function checks the request's cookies and headers for a session JWT and if found, attaches the [`Auth`](/docs/references/backend/types/auth-object) object to the `request` object under the `auth` key. **It's required, and must be set before any other middleware.**

```js
import { clerkMiddleware } from '@clerk/express'

const app = express()

// Pass no parameters
app.use(clerkMiddleware())

// Pass options
app.use(clerkMiddleware(options))
```

### `clerkMiddleware()` options

<Include src="_partials/clerk-middleware-options" />

<Properties>
  - `clerkClient`
  - [`ClerkClient`](/docs/js-backend/getting-started/quickstart#create-clerk-client-options)

  An instance of the `ClerkClient` class. This is used to interact with the Clerk API.

  ---

  - `debug`
  - `boolean`

  A flag to enable debug mode. When set to `true`, the middleware will log debug information to the console. Defaults to `false`.

  ---

  - `enableHandshake`
  - `boolean`

  A flag to enable Clerk's handshake flow, which helps verify the session state when a session JWT has expired. It issues a `307` redirect to refresh the session JWT if the user is still logged in. Defaults to `true`.
</Properties>
