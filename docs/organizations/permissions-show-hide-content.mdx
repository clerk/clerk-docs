---
title: Restrict access with Permissions
description: 
---

# Restrict access with Permissions

Clerk provides two helpers for authorization:

- **`protect` helpers** are opinionated and will not process unauthorized users, either by not rendering children or by throwing errors. [`<Protect />` component](/docs/components/protect) and the experimental `auth().protect` fall into this category.
- **`has` helpers** are more composable and flexible. They let you check to see what Permissions a user *has*. You can decide what to do if the user lacks the required Permissions.

## Authorization in Client Components

### `<Protect/>` component

The following snippet uses Clerk's `<Protect />` component to only render the form for users with the `org:team_settings:manage` Permissions.

This example will work for Server Side Rendering (SSR) and Client Side Rendering (CSR). Because this is a Client component, the exact code from below will work for any React meta-framework, like Next.js, Remix, or Gatsby.

<CodeBlockTabs type="framework" options={["Next.js", "Other React frameworks"]}>
```tsx filename="/app/dashboard/settings/form.tsx"
'use client';

export function SettingsForm(){
  return (
    <Protect 
      permission="org:team_settings:manage"
	  fallback={<p>You are not allowed to see this section.</p>}>
      <form>
        //....
      </form>
    </Protect>
  )
}
```

```tsx filename="/app/dashboard/settings/form.tsx"
export function SettingsForm(){
  return (
    <Protect 
      permission="org:team_settings:manage"
	  fallback={<p>You are not allowed to see this section.</p>}>
      <form>
        //....
      </form>
    </Protect>
  )
}
```
</CodeBlockTabs>

### `useAuth()` hook and `has`

The [`useAuth()`](/docs/references/react/use-auth) hook can help you access what permissions a user has using `has`. In the below snippet, `has({ permission: "org:team_settings:manage" })` returns `false` if the user does not have the `org:team_settings:manage` Permission.

<CodeBlockTabs type="framework" options={["Next.js"]}>
```tsx filename="/app/dashboard/settings/form.tsx"
'use client';

export function SettingsForm(){
  const { has } = useAuth();
  const canManageSettings = has({ permission: "org:team_settings:manage" });
  
  if(!canManageSettings) return null;
  
  return (
    <form>
      //...
    </form>
  )
}
```
</CodeBlockTabs>

## Authorization in Server Components

### `<Protect/>` as a React Server Component (RSC) in Next.js

The following snippet uses `<Protect />`'s `condition` prop to conditionally render its children if the user has either `org:team_settings:manage` or `org:team_settings:read` Permissions.

<CodeBlockTabs type="framework" options={["Next.js"]}>
```tsx filename="/app/dashboard/settings/layout.tsx"
export default function SettingsLayout(props: PropsWithChildren){
return (
  <Protect
    condition={has => has({permission: "org:team_settings:manage"}) || has({permission: "org:team_settings:read"})}>
   {props.children}
  </Protect>
)
}
```
</CodeBlockTabs>

### `auth()` server utility in an RSC

The following snippet uses `has` to inspect a user's Permissions granularly. If the user doesn't have both `org:team_settings:manage` and `org:team_settings:read` Permissions, the component returns `null` instead of rendering its children.

<CodeBlockTabs type="framework" options={["Next.js"]}>
```tsx filename="/app/dashboard/settings/layout.tsx"
export default function SettingsLayout(props: PropsWithChildren){
  const { has } = auth();
  const canManage = has({permission:"org:team_settings:manage"});
  const canRead = has({permission: "org:team_settings:read"});
  const canAccessSettings = canManage || canRead;  
  if(!canAccessSettings) return null;  
  return props.children;
}
```
</CodeBlockTabs>

### `auth().protect` experimental server utility in a RSC

In the following snippet, `userId` will always be a string because if the authorization checks fail, a `notFound` error will throw.

<CodeBlockTabs type="framework" options={["Next.js"]}>
```tsx filename="/app/dashboard/settings/layout.tsx"
export default function SettingsLayout(props: PropsWithChildren){
  const { userId } = auth().protect(
    has => has({permission: "org:team_settings:manage"}) || has({permission: "org:team_settings:read"})
  );
  return props.children
}
```
</CodeBlockTabs>

## Authorization in Server Actions

<CodeBlockTabs type="framework" options={["Next.js"]}>
```tsx
export default function ServerComponent() {
  async function myAction() {
    'use server'
    const { has } = auth();
    
    const canManage = has({permission:"org:team_settings:manage"});
    const canRead = has({permission: "org:team_settings:read"});
    const canAccessSettings = canManage || canRead;

    // ... Perform a database operation ...
  }
}
```
</CodeBlockTabs>

## Authorization in Route Handlers (API routes)

<CodeBlockTabs type="framework" options={["Next.js"]}>
```tsx filename="/app/settings/route.ts"
import { auth } from "@clerk/nextjs";

// using protect
export const POST = () => {
  const { userId } = auth().protect({permission: "org:team_settings:manage"})
  return users.createTeam(userId);
}

// using has
export const GET = () => {
  const { userId, has } = auth();

  if(!userId){
  return Response.json({error: "Unathorized"}, {status: 401})
}

if(!has({permission: "org:team_settings:read"})){
  return Response.json({error: "Forbidden"}, {status: 403})
}

return users.getTeams(userId)
  // ...
}
```
</CodeBlockTabs>

## Authorization in Remix Loaders

<CodeBlockTabs type="framework" options={["Remix"]}>
```tsx
export const loader: LoaderFunction = async args => {
  const { has } = await getAuth(args);
  
  if(has({permission: "org:team_settings:manage"})){
    return redirect('/request-access');
  }
  return {};
};

export default function Settings() {
  return (
    <div>
      <h1>Settings Page</h1>
    </div>
  );
}
```
</CodeBlockTabs>

## Authorization in JS SDK

If you are not using React or any of the meta-frameworks we support, there's a good chance that you are using Clerk.js directly. In that case the following snippet can help.

<CodeBlockTabs type="framework" options={["JavaScript"]}>
```tsx
import Clerk from '@clerk/clerk-js'

const clerk = new Clerk(...)
await clerk.load(...)

const canManageSettings = clerk.session.checkAuthorization({
  permission: "org:team_settings:manage"
})
```
</CodeBlockTabs>
