---
title: Add authentication and user management to your Next.js app with Clerk in 7 minutes
description: Learn how to use Clerk to quickly and easily add secure authentication and user management to your Next.js application. Clerk works seamlessly on both client side and server side components.
---

<TutorialHero
  framework="nextjs"
  beforeYouStart={[
    {
      title: "Set up a Clerk application",
      link: "https://clerk.com/docs/quickstarts/setup-clerk",
    },
    {
      title: "Create a Next.js application",
      link: "https://nextjs.org/docs/getting-started/installation",
    },
  ]}
>

- Install `@clerk/nextjs`
- Set up your environment keys
- Wrap your Next.js app in `<ClerkProvider />`
- Add Middleware to your app
- Use Clerk components to protect your content
- Embed the `<UserButton />` and `<SignInButton />`
- Deploy your application

</TutorialHero>

<Steps>

### Install `@clerk/nextjs`

Clerk's Next.js SDK gives you access to prebuilt [components](/docs/components/overview), [hooks](/docs/references/nextjs/overview#client-side-helpers), and [helpers](/docs/references/nextjs/overview) for Next.js Server Components, Route Handlers and Middleware. Install it by running the following command in your terminal:

<CodeBlockTabs type="installer" options={["npm", "yarn", "pnpm"]}>
  ```bash filename="terminal"
  npm install @clerk/nextjs
  ```

```bash filename="terminal"
yarn add @clerk/nextjs
```

```bash filename="terminal"
pnpm add @clerk/nextjs
```

</CodeBlockTabs>

### Set environment keys

In your Next.js project's root folder, you may have an `.env.local` file alongside `package.json` and other configuration files. If you don't see it, create it.

Add the following code to your `.env.local` file to set your public and secret keys.

**Pro tip!** If you are signed into your [Clerk Dashboard](https://dashboard.clerk.com/last-active?path=api-keys), your secret key should become visible by clicking on the eye icon.

<InjectKeys>

```sh filename=".env.local"
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}
CLERK_SECRET_KEY={{secret}}
```

</InjectKeys>

This sets your public and secret keys.

### Wrap your app in `<ClerkProvider>`

The [`<ClerkProvider>`](/docs/components/clerk-provider) component provides active session and user context to Clerk's hooks and other components. Import it into your app by adding `import { ClerkProvider } from '@clerk/nextjs'` at the top of your file.

<Tabs type="router" items={["App Router", "Pages Router"]}>
  <Tab>
    <Callout>
      The `app/layout.tsx` file might be in your `src` folder if it isn't in your root folder.
    </Callout>

    For this project, it makes sense to wrap the `<html />` element with `<ClerkProvider>`. This makes the active session and user context accessible anywhere within the app.

    ```tsx filename="/src/app/layout.tsx" {1,10,14}
    import { ClerkProvider } from '@clerk/nextjs'
    import './globals.css'

    export default function RootLayout({
      children,
    }: {
      children: React.ReactNode
    }) {
      return (
        <ClerkProvider>
          <html lang="en">
            <body>{children}</body>
          </html>
        </ClerkProvider>
      )
    }
    ```

  </Tab>

  <Tab>
    For this project, it makes sense to wrap the `<Component />` element with `<ClerkProvider>`. This makes the active session and user context accessible anywhere within `MyApp`.

    ```tsx filename="_app.tsx" {2,6,8}
      import '@/styles/globals.css'
      import { ClerkProvider } from "@clerk/nextjs";
      import type { AppProps } from "next/app";
      function MyApp({ Component, pageProps }: AppProps) {
        return (
          <ClerkProvider {...pageProps}>
            <Component {...pageProps} />
          </ClerkProvider>
        );
      }
      export default MyApp;
      ```

  </Tab>
</Tabs>

### Add Middleware to your app

Middleware grants you access to user authentication state throughout your application, on any route or page. While `clerkMiddleware()` offers the capability to protect routes, it does not enforce protection by default.

To get started, create a `middleware.ts` file. If your application uses the `src/` directory, your `middleware.ts` file should be placed inside the `src/` folder. If you are not using a `src/` directory, place the `middleware.ts` file in your root directory alongside `.env.local`.


Copy and paste the following code into your middleware.ts. 

```tsx filename="middleware.ts"
import { clerkMiddleware } from "@clerk/nextjs/server";

export default clerkMiddleware()

export const config = {
  matcher: ['/((?!.+\\.[\\w]+$|_next).*)', '/', '/(api|trpc)(.*)'],
};
```

### Use Clerk components to protect your content

Clerk offers a set of [prebuilt components](/docs/components/overview) that can gate access to content based on whether a user is signed in and has the correct permissions. You can use Clerk's [`<SignedIn>`](/docs/components/control/signed-in) and [`<SignedOut>`](/docs/components/control/signed-out) components to restrict access to content and even whole pages. The `<SignedIn>` component requires the user be signed in to view the content inside the tags. The `<SignedOut>` components requires the user to be signed out.

<CodeBlockTabs type="router" options={["App Router", "Pages Router"]}>
```tsx filename="app/page.tsx" {1,6-11}
import { SignedIn, SignedOut } from "@clerk/nextjs";

export default function Home() {
  return (
    <div className="h-screen">
      <SignedOut>
        <p>This content is public. Only signed out users can see this.</p>
      </SignedOut>
      <SignedIn>
        <p>This content is private. Only signed in users can see this.</p>
      </SignedIn>
    </div>
  )
}
```

```tsx filename="pages/index.tsx" {1,6-11}
import { SignedIn, SignedOut } from "@clerk/nextjs";

export default function Home() {
  return (
    <>
      <SignedOut>
        <p>This content is public. Only signed out users can see this.</p>
      </SignedOut>
      <SignedIn>
        <p>This content is private. Only signed in users can see this.</p>
      </SignedIn>
    </>
  );
}
``` 
</CodeBlockTabs>

Try accessing your app now by visiting [`http://localhost:3000`](http://localhost:3000) to see what signed out users will see. Next you will add a button so you can sign in and see the content within the `<SignedIn />` component.


### Embed the `<UserButton />` and `<SignInButton />`

Clerk offers a set of [prebuilt components](/docs/components/overview) to add functionality to your app with minimal effort. The [`<UserButton />`](/docs/components/user/user-button) allows users to manage their account information and log out, completing the full authentication circle. The [`<SignInButton />`(/docs/components/unstyled/sign-in-button)] is an unstyled component designed to wrap about your button. It can also act as a basic button on its own.

To add the `<UserButton />` and `<SignInButton />` components, first add `import { UserButton, SignedInButton } from "@clerk/nextjs";` to the top of your file. Then, add `<UserButton afterSignOutUrl="/"/>` inside of the `<SignedIn />` components. The `afterSignOutUrl` prop lets you customize what page the user will be redirected to after sign out. Finally, add `<SignInButton />` component inside of the `<SignedOut /> components`


<CodeBlockTabs type="router" options={["App Router", "Pages Router"]}>
```tsx filename="app/page.tsx" {1,7,11}
import { SignInButton, SignedIn, SignedOut, UserButton } from "@clerk/nextjs";

export default function Home() {
  return (
    <div className="h-screen">
      <SignedOut>
        <SignInButton />
        <p>This content is public. Only signed out users can see this.</p>
      </SignedOut>
      <SignedIn>
        <UserButton />
        <p>This content is private. Only signed in users can see this.</p>
      </SignedIn>
    </div>
  )
}
```

```tsx filename="pages/index.tsx" {1,7,11}
import { SignInButton, SignedIn, SignedOut, UserButton } from "@clerk/nextjs";

export default function Home() {
  return (
    <>
      <SignedOut>
        <SignInButton />
        <p>This content is public. Only signed out users can see this.</p>
      </SignedOut>
      <SignedIn>
        <UserButton />
        <p>This content is private. Only signed in users can see this.</p>
      </SignedIn>
    </>
  );
}
```
</CodeBlockTabs>

Visit [http://localhost:3000[(http://localhost:3000)] and try signing in to see the protected content and signing out to see the protected and unprotected content.

### Deploy your application

You're ready to [deploy your app to production](/docs/deployments/overview) and welcome new users!

</Steps>

## You're authenticated!

Congratulations! Your app is now only available to authenticated users. But this is just the first step.

If you would like a repository that demonstrates many of the features Clerk has to offer, such as user, session, and organization management, check out one of Clerk's demo repositories:

- [Clerk + Next.js App Router Demo](https://github.com/clerk/clerk-nextjs-demo-app-router)
- [Clerk + Next.js Pages Router Demo](https://github.com/clerk/clerk-nextjs-demo-pages-router)

## Next step: Route Protection

Learn about the options available for protecting your routes, from using `clerkMiddleware()` to layouts or even per page. Read the [Route Protection](/docs/references/nextjs/route-protection) guide to learn more.

You can also learn more about Clerk components, how to customize them, and how to use Clerk's client side helpers. The following guides are good places to start.

<div className="container mx-auto my-4">
  <div className="grid grid-cols-1 gap-6 md:grid-cols-2">
    <Cards title="Create custom sign-up and sign-in pages" description="Learn how add custom sign-up and sign-in pages with Clerk components." link="/docs/references/nextjs/custom-signup-signin-pages" cta="Learn More" />

    <Cards title="Read user and session data" description="Learn how to use Clerk's hooks and helpers to access the active session and user data in your Next.js application." link="/docs/references/nextjs/read-session-data" cta="Learn More" />

    <Cards title="Client Side Helpers" description="Learn more about Next.js client side helpers and how to use them." link="/docs/references/nextjs/overview#client-side-helpers" cta="Learn More" />

    <Cards title="Next.js SDK Reference" description="Learn more about additional Next.js methods." link="/docs/references/nextjs/overview" cta="Learn More" />

    <Cards title="Use Clerk with Next.js 12 and older" description="Learn how to use Clerk with older versions of Next.js." link="/docs/references/nextjs/usage-with-older-versions" cta="Learn More" />

  </div>
</div>
