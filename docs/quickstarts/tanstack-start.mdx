---
title: Tanstack Start Quickstart (Beta)
description: Learn how to use Clerk to quickly and easily add secure authentication and user management to your TanStack Start application.
---

> [!WARNING]
> The TanStack Start SDK is currently in beta. **It is not yet recommended for production use**.

<TutorialHero
  framework="react"
  exampleRepo={[
    {
      title: "TanStack Start Quickstart Repo",
      link: "https://github.com/clerk/clerk-tanstack-start-quickstart"

    }
  ]}
  beforeYouStart={[
    {
      title: "Set up a Clerk application",
      link: "/docs/quickstarts/setup-clerk",
      icon: "clerk",
    }
  ]}
>
  - Install `@clerk/tanstack-start`
  - Set up your environment variables
  - Configure `clerkHandler`
  - Add `<ClerkProvider />` to your application
  - Protect your pages
</TutorialHero>

Learn how to use Clerk to quickly and easily add secure authentication and user management to your TanStack Start application.

<Steps>
  ### Install `@clerk/tanstack-start`

  Once you have a TanStack Start application ready, you need to install Clerk's TanStack Start SDK. This gives you access to our prebuilt components and hooks for TanStack Start applications.

  <CodeBlockTabs type="installer" options={["npm", "yarn", "pnpm"]}>
    ```bash {{ prettier: false, filename: 'terminal' }}
    npm install @clerk/tanstack-start
    ```

    ```bash {{ prettier: false, filename: 'terminal' }}
    yarn add @clerk/tanstack-start
    ```

    ```bash {{ prettier: false, filename: 'terminal' }}
    pnpm add @clerk/tanstack-start
    ```
  </CodeBlockTabs>

  ### Set your environment variables

Add the following keys to your `.env` file. These keys can always be retrieved from the [API Keys](https://dashboard.clerk.com/last-active?path=api-keys) page of your Clerk Dashboard.

  ```env {{ prettier: false, filename: '.env' }}
  VITE_CLERK_PUBLISHABLE_KEY={{pub_key}}
  CLERK_SECRET_KEY={{secret}}
  ```

  ### Add `clerkHandler` to your application

  To configure Clerk in your TanStack application, you will need to update the SSR entrypoint.

  ```tsx {{ filename: 'app/ssr.tsx', ins: [4, [11,14]], del: [[6,9]] }}
  import { createStartHandler, defaultStreamHandler } from '@tanstack/start/server';
  import { getRouterManifest } from '@tanstack/start/router-manifest';
  import { createRouter } from './router';
  import { createClerkHandler } from '@clerk/tanstack-start/server';

  export default createStartHandler({
    createRouter,
    getRouterManifest,
  })(defaultStreamHandler);

  export default createClerkHandler(createStartHandler({
    createRouter,
    getRouterManifest,
  }))(defaultStreamHandler);
  ```

  ### Add `<ClerkProvider>` and components to your app

  All Clerk hooks and components must be children of the [`<ClerkProvider>`](/docs/components/clerk-provider) component, which provides active session and user context.

  ```tsx {{ filename: 'app/routes/__root.tsx', ins: [11, 28, 32] }}
     import {
      Outlet,
      ScrollRestoration,
      createRootRoute,
    } from '@tanstack/react-router'
    import { TanStackRouterDevtools } from '@tanstack/router-devtools'
    import { Body, Head, Html, Meta, Scripts } from '@tanstack/start'
    import * as React from 'react'
    import { DefaultCatchBoundary } from '~/components/DefaultCatchBoundary'
    import { NotFound } from '~/components/NotFound'
    import { ClerkProvider } from '@clerk/tanstack-start'
    import appCss from '~/styles/app.css?url'

    export const Route = createRootRoute({
      links: () => [
        { rel: 'stylesheet', href: appCss },
      ],
      errorComponent: (props) => {
        return (
          <RootDocument>
            <DefaultCatchBoundary {...props} />
          </RootDocument>
        )
      },
      notFoundComponent: () => <NotFound />,
      component: () => {
        return (
          <ClerkProvider>
            <RootDocument>
              <Outlet />
            </RootDocument>
          </ClerkProvider>
        )
      },
    })

    function RootDocument({ children }: { children: React.ReactNode }) {
      return (
        <Html>
          <Head>
            <Meta />
          </Head>
          <Body>
            {children}
            <ScrollRestoration />
            <TanStackRouterDevtools position="bottom-right" />
            <Scripts />
          </Body>
        </Html>
      )
    }
  ```

  ### Protect your pages

  #### Client side

  Clerk offers [Control Components](/docs/components/overview) that allow you to protect your pages. These components are used to control the visibility of your pages based on the user's authentication state.

  ```tsx {{ filename: 'app/routes/index.tsx' }}
  import { SignedIn, UserButton, SignOutButton, SignedOut, SignInButton, SignUpButton } from '@clerk/tanstack-start'
  import { createFileRoute } from '@tanstack/react-router'

  export const Route = createFileRoute('/')({
    component: Home,
  })

  function Home() {
    return (
      <div>
        <h1>Index Route</h1>
        <SignedIn>
          <p>You are signed in!</p>
          <div>
            <p>View your profile here</p>
            <UserButton />
          </div>
          <div>
            <SignOutButton />
          </div>
        </SignedIn>
        <SignedOut>
          <p>You are signed out</p>

          <SignInButton mode='modal' />

          <SignUpButton mode='modal' />
        </SignedOut>
      </div>
    )
  }
  ```

  #### Server side

  To protect your routes, you can use the `beforeLoader` paired with server function to check for the `userId` singleton. If it doesn't exist, redirect your user back to the sign-in page.

  ```tsx {{ filename: 'app/routes/index.tsx', prettier: false }}
  import { createFileRoute, useRouter, redirect } from '@tanstack/react-router'
  import { createServerFn } from '@tanstack/start'
  import { getAuth } from '@clerk/tanstack-start/server'

  const authStateFn = createServerFn('GET', async (_, { request }) => {
    const { userId } = await getAuth(request)

    if (!userId) {
      throw redirect({
        to: '/sign-in',
      })
    }

    return { userId }
  })

  export const Route = createFileRoute('/')({
    component: Home,
    beforeLoad: await authStateFn(),
    loader: async ({ context }) => {
      return { userId: context.userId }
    },
  })

  function Home() {
    const router = useRouter()
    const state = Route.useLoaderData()

    return <h1>Welcome your id is {state.userId}!</h1>
  }
  ```
</Steps>

## Next steps

<Cards>
  - [Create custom sign-up and sign-in pages](/docs/references/tanstack-start/custom-signup-signin-pages)
  - Learn how add custom sign-up and sign-in pages with Clerk components.

  ---

  - [Read user and session data](/docs/references/tanstack-start/read-session-data)
  - Learn how to use Clerk's hooks and helpers to access the active session and user data in your TanStack Start application.

  ---

  - [Customization & localization](/docs/customization/overview)
  - Learn how to customize and localize the Clerk components.

  ---

  - [Clerk components](/docs/components/overview)
  - Learn more about Clerk's prebuilt components.
</Cards>
