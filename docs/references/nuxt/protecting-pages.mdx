---
title: Protecting pages with defineNuxtRouteMiddleware() | Nuxt
description: Learn how to protect your Nuxt pages using Nuxt's utility function.
---

The [`defineNuxtRouteMiddleware()`](https://nuxt.com/docs/api/utils/define-nuxt-route-middleware) utility function integrates Clerk authentication into your Nuxt application through middleware to protect pages by validating authentication client-side. You can use this utility to protect pages based on user authentication status.

To learn how to protect API routes, see the [dedicated guide](/docs/references/nuxt/clerk-middleware#protect-api-routes).

## Configure `defineNuxtRouteMiddleware()`

1. In your `middleware/` directory, create a file named `auth.ts`:

```ts {{ filename: 'middleware/auth.ts' }}
export default defineNuxtRouteMiddleware(() => {
  const { userId } = useAuth()

  // If the user is not signed in, redirect to the sign-in page
  if (!userId.value) {
    return navigateTo('/sign-in')
  }
})
```

## Protecting pages with `defineNuxtRouteMiddleware()`

1. In your `pages` directory, create a page named `dashboard.vue`. This page should be accessible only to authenticated users:

```vue {{ filename: 'pages/dashboard.vue' }}
<script setup lang="ts">
definePageMeta({
  // `auth` is the name of the middleware file
  middleware: ['auth'],
})
</script>

<template>
  <h1>Dashboard page</h1>
</template>
```
