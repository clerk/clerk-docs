---
title: Get started with Organizations and TanStack React Start
description: Create and manage Organizations in your TanStack React Start app in this guided tutorial.
sdk: tanstack-react-start
---

<TutorialHero
  beforeYouStart={[
    {
      title: "Set up a Clerk + TanStack React Start application",
      link: "/docs/tanstack-react-start/getting-started/quickstart",
      icon: "clerk",
    }
  ]}
/>

Organizations let you group users with Roles and Permissions, enabling you to build multi-tenant B2B apps like Slack (workspaces), Linear (teams), or Vercel (projects) where users can switch between different team contexts. This tutorial will demonstrate how to add Organizations, create and switch Organizations, and protect routes by Organization and Roles.

> [!WARNING]
> The TanStack React Start SDK is currently in beta. **It is not yet recommended for production use**.

<Steps>
  ## Add `<OrganizationSwitcher/>` to your app

  The `<OrganizationSwitcher />` component is the easiest way to let users create, switch between, and manage Organizations. It's recommended to place it in your app's header or navigation so it's always accessible to your users. For example:

  ```tsx {{ filename: 'src/routes/index.tsx' }}
    import {
      SignedIn,
      UserButton,
      SignedOut,
      SignInButton,
  +   OrganizationSwitcher,
    } from '@clerk/tanstack-react-start'
    import { createFileRoute } from '@tanstack/react-router'

    export const Route = createFileRoute('/')({
      component: Home,
    })

    function Home() {
      return (
        <div>
          <h1>Index Route</h1>
  +       <OrganizationSwitcher />
          <SignedIn>
            <p>You are signed in</p>
            <UserButton />
          </SignedIn>
          <SignedOut>
            <p>You are signed out</p>
            <SignInButton />
          </SignedOut>
        </div>
      )
    }
  ```

  ## Access Organization data

  <Tabs items={['Server-side', 'Client-side']}>
    <Tab>
      To access information about the currently [Active Organization](!active-organization) on the server-side, use [`clerkClient()`](/docs/reference/nextjs/overview#clerk-client) to call the [`getOrganization()`](/docs/reference/backend/organization/get-organization) method, which returns the Backend [`Organization`](/docs/reference/backend/types/backend-organization) object. You'll need to pass an `orgId`, which you can access from the [`Auth`](/docs/reference/backend/types/auth-object) object.

      ```tsx {{ filename: 'src/routes/index.tsx' }}
      import { createFileRoute, redirect } from '@tanstack/react-router'
      import { createServerFn } from '@tanstack/react-start'
      import { clerkClient, auth } from '@clerk/tanstack-react-start/server'

      const authStateFn = createServerFn({ method: 'GET' }).handler(async () => {
        // Use `auth()` to access the `Auth` object
        // https://clerk.com/docs/reference/backend/types/auth-object
        const { isAuthenticated, orgId, orgRole } = await auth()

        // Protect the server function from unauthenticated users
        if (!isAuthenticated) {
          // This might error if you're redirecting to a path that doesn't exist yet
          // You can create a sign-in route to handle this
          // See https://clerk.com/docs/reference/tanstack-react-start/custom-sign-in-or-up-page
          throw redirect({
            to: '/sign-in/$',
          })
        }

        // Check if there is an Active Organization
        if (!orgId) return <p>Set an Active Organization to access this page.</p>

        // Use the `getOrganization()` method to get the Backend `Organization` object
        const organization = await clerkClient().organizations.getOrganization({ organizationId: orgId })

        return { orgId, orgRole, organization: organization.name }
      })

      export const Route = createFileRoute('/')({
        component: Home,
        beforeLoad: () => authStateFn(),
        loader: async ({ context }) => {
          return { orgId: context.orgId, orgRole: context.orgRole, organization: context.organization }
        },
      })

      function Home() {
        const state = Route.useLoaderData()

        return (
          <div>
            <h1>
              Welcome to the <strong>{state.organization}</strong> organization
            </h1>
            <p>
              Your role in this organization: <strong>{state.orgRole}</strong>
            </p>
          </div>
        )
      }
      ```
    </Tab>

    <Tab>
      Use the [`useOrganization()`](/docs/reference/hooks/use-organization) hook to access information about the currently [Active Organization](!active-organization). Use the [`useOrganizationList()`](/docs/reference/hooks/use-organization-list) hook to access information about the current user's organization memberships.

      ```tsx {{ filename: 'src/routes/example.tsx' }}
      import { useOrganization, useOrganizationList } from '@clerk/tanstack-react-start'
      import { createFileRoute } from '@tanstack/react-router'

      export const Route = createFileRoute('/example')({
        component: Example,
      })

      function Example() {
        const { organization } = useOrganization()
        const { userMemberships } = useOrganizationList({
          userMemberships: true,
        })

        return (
          <div className="p-8">
            <h1 className="text-2xl font-bold mb-4">
              Welcome to the <strong>{organization?.name}</strong> organization
            </h1>
            <p className="mb-6">
              Your role in this organization:{' '}
              <strong>
                {/* Find the organization membership that matches the
                  currently active organization and return the role */}
                {
                  userMemberships?.data?.find(
                    (membership) => membership.organization.id === organization?.id,
                  )?.role
                }
              </strong>
            </p>
          </div>
        )
      }
      ```
    </Tab>
  </Tabs>

  ## Visit your app

  Run your project with the following command:

  ```npm
  npm run dev
  ```

  Visit your app locally at [`localhost:3000`](http://localhost:3000).

  ### Enable Organizations

  When prompted, select **Enable Organizations**.

  ### Create first user and Organization

  You must sign in to use Organizations. When prompted, select **Sign in to continue**. Then, authenticate to create your first user.

  Since you selected disabled Personal Accounts when you enabled Organizations, every user must be in at least one Organization. [Clerk will prompt you](!choose-organization) to create an Organization for your user.

  ## Create and switch Organizations

  At this point, Clerk should have redirected you to a page with the [`<OrganizationSwitcher />`](/docs/reference/components/organization/organization-switcher) component. This component allows you to create, switch between, and manage organizations.

  1. Select the `<OrganizationSwitcher />` component, then **Create an organization**.
  1. Enter `Acme Corp` as the Organization name.
  1. Invite users to your Organization and select their Role.

  ## Protect routes by Organization and Roles

  You can protect content and even entire routes based on Organization membership, Roles, and Permissions by performing [authorization checks](!authorization-check).

  In the following example, the page is protected from unauthenticated users, users that don't have the `org:admin` Role, and users that are not in the `Acme Corp` Organization.

  <Tabs items={['Server-side', 'Client-side']}>
    <Tab>
      ```tsx {{ filename: 'src/routes/index.tsx' }}
      import { createFileRoute, redirect } from '@tanstack/react-router'
      import { createServerFn } from '@tanstack/react-start'
      import { clerkClient, auth } from '@clerk/tanstack-react-start/server'

      const authStateFn = createServerFn({ method: 'GET' }).handler(async () => {
        // Use `auth()` to access the `Auth` object
        // https://clerk.com/docs/reference/backend/types/auth-object
        const { isAuthenticated, orgId, has } = await auth()
        const requiredOrgName = 'Acme Corp'

        // Protect the server function from unauthenticated users
        if (!isAuthenticated) {
          // This might error if you're redirecting to a path that doesn't exist yet
          // You can create a sign-in route to handle this
          // See https://clerk.com/docs/reference/tanstack-react-start/custom-sign-in-or-up-page
          throw redirect({
            to: '/sign-in/$',
          })
        }

        // Check if there is an Active Organization
        if (!orgId) return <p>Set an Active Organization to access this page.</p>

        // Check if the user has the `org:admin` Role
        if (!has({ role: 'org:admin' })) return <p>You must be an admin to access this page.</p>

        // Use the `getOrganization()` method to get the Backend `Organization` object
        const organization = await clerkClient().organizations.getOrganization({ organizationId: orgId })

        // Check if Organization name matches (e.g. 'Acme Corp')
        if (organization.name !== requiredOrgName)
          return (
            <p>
              This page is only accessible in the <strong>{requiredOrgName}</strong> Organization. Switch
              to the <strong>{requiredOrgName}</strong> Organization to access this page.
            </p>
          )

        return { orgId, organizationName: organization.name }
      })

      export const Route = createFileRoute('/')({
        component: Home,
        beforeLoad: () => authStateFn(),
        loader: async ({ context }) => {
          return { orgId: context.orgId, organizationName: context.organizationName }
        },
      })

      function Home() {
        const state = Route.useLoaderData()

        return (
          <p>
            You are currently signed in as an <strong>admin</strong> in the{' '}
            <strong>{state.organizationName}</strong> Organization.
          </p>
        )
      }
      ```
    </Tab>

    <Tab>
      ```tsx {{ filename: 'src/routes/example.tsx' }}
      import { useAuth, useOrganization } from '@clerk/tanstack-react-start'
      import { createFileRoute } from '@tanstack/react-router'

      export const Route = createFileRoute('/example')({
        component: Example,
      })

      function Example() {
        // The `useAuth()` hook gives you access to properties like `isSignedIn` and `has()`
        const { isSignedIn, has } = useAuth()
        const { organization } = useOrganization()
        const requiredOrgName = 'Acme Corp'

        // Check if the user is authenticated
        if (!isSignedIn) return <p>You must be signed in to access this page.</p>

        // Check if there is an Active Organization
        if (!organization) return <p>Set an active organization to access this page.</p>

        // Check if the user has the `org:admin` Role
        if (!has({ role: 'org:admin' })) return <p>You must be an admin to access this page.</p>

        // Check if Organization name matches (e.g. 'Acme Corp')
        if (organization.name !== requiredOrgName)
          return (
            <p>
              This page is only accessible in the <strong>{requiredOrgName}</strong> Organization. Switch
              to the <strong>{requiredOrgName}</strong> Organization to access this page.
            </p>
          )

        return (
          <p>
            You are currently signed in as an <strong>admin</strong> in the{' '}
            <strong>{organization.name}</strong> Organization.
          </p>
        )
      }
      ```
    </Tab>
  </Tabs>

  Navigate to [`localhost:3000/protected`](localhost:3000/protected). You should see a green message confirming you are an admin in `Acme Corp`. Use the `<OrganizationSwitcher/>` to switch Organizations or rename the Organization to show the red message.

  Learn more about protecting routes and checking Organization Roles in the [authorization guide](/docs/guides/organizations/control-access/roles-and-permissions).

  ## It's time to build your B2B SaaS!

  <Include src="_partials/organization-get-started-next-steps" />
</Steps>
