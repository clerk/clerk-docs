---
title: Build a custom email/password authentication flow
description: Learn how to build a custom email/password sign-up and sign-in flow using the Clerk API.
sdk: nextjs, react, expo, js-frontend, react-router, tanstack-react-start, ios, android
---

<Include src="_partials/custom-flows-callout" />

<If sdk={["nextjs", "react", "expo", "js-frontend", "react-router", "tanstack-react-start"]}>
  > [!IMPORTANT]
  > This guide applies to the following Clerk SDKs:
  >
  > - `@clerk/react` v6 or higher
  > - `@clerk/nextjs` v7 or higher
  > - `@clerk/expo` v3 or higher
  > - `@clerk/react-router` v3 or higher
  > - `@clerk/tanstack-react-start` v0.26.0 or higher
  >
  > If you're using an older version of one of these SDKs, or are using the legacy API, refer to the [legacy API documentation](/docs/guides/development/custom-flows/authentication/legacy/email-password).
</If>

This guide will walk you through how to build a custom email/password sign-up and sign-in flow.

<Steps>
  ## Enable email and password authentication

  To use email and password authentication, you first need to ensure they are enabled for your application.

  1. In the Clerk Dashboard, navigate to the [**User & authentication**](https://dashboard.clerk.com/last-active?path=user-authentication/user-and-authentication) page.
  1. Enable **Sign-up with email** and **Sign-in with email**.
  1. Select the **Password** tab and enable **Sign-up with password**. Leave **Require a password at sign-up** enabled.

  > [!NOTE]
  > By default, **Email verification code** is enabled for both sign-up and sign-in. This means that when a user signs up using their email address, Clerk sends a one-time code to their email address. The user must then enter this code to verify their email and complete the sign-up process. When the user uses the email address to sign in, they are emailed a one-time code to sign in. If you'd like to use **Email verification link** instead, see the [custom flow for email links](/docs/guides/development/custom-flows/authentication/email-links).

  ## Sign-up flow

  To sign up a user using their email, password, and email verification code, you must:

  <If sdk={["nextjs", "react", "expo", "js-frontend", "react-router", "tanstack-react-start"]}>
    1. Initiate the sign-up process by collecting the user's email address and password with the [`signUp.password()`](/docs/reference/javascript/sign-up-future#password) method.
    1. Send a one-time code to the provided email address for verification with the [`signUp.verifications.sendEmailCode()`](/docs/reference/javascript/sign-up-future#verifications-send-email-code) method.
    1. Collect the one-time code and verify it with the [`signUp.verifications.verifyEmailCode()`](/docs/reference/javascript/sign-up-future#verifications-verify-email-code) method.
    1. If the email address verification is successful, finalize the sign-up with the [`signUp.finalize()`](/docs/reference/javascript/sign-up-future#finalize) method to create the user and set the newly created session as the active session.

    <Tabs items={["Next.js"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-password/sign-up-nextjs" />
      </Tab>
    </Tabs>
  </If>

  <If sdk={["ios", "android"]}>
    1. Initiate the sign-up process by collecting the user's email address and password.
    1. Prepare the email address verification, which sends a one-time code to the given address.
    1. Collect the one-time code and attempt to complete the email address verification with it.
    1. If the email address verification is successful, set the newly created session as the active session.

    <Tabs items={["iOS", "Android"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-password/sign-up-ios" />
      </Tab>

      <Tab>
        <Include src="_partials/custom-flows/email-password/sign-up-android" />
      </Tab>
    </Tabs>
  </If>

  ## Sign-in flow

  To authenticate a user using their email and password, you must:

  <If sdk={["nextjs", "react", "expo", "js-frontend", "react-router", "tanstack-react-start"]}>
    1. Initiate the sign-in process by collecting the user's email address and password with the [`signIn.password()`](/docs/reference/javascript/sign-in-future#password) method.
    1. If the attempt is successful, finalize the sign-in with the [`signIn.finalize()`](/docs/reference/javascript/sign-in-future#finalize) method to set the newly created session as the active session.

    <Tabs items={["Next.js"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-password/sign-in-nextjs" />
      </Tab>
    </Tabs>
  </If>

  <If sdk={["ios", "android"]}>
    1. Initiate the sign-in process by creating a `SignIn` using the email address and password provided.
    1. If the attempt is successful, set the newly created session as the active session.

    <Tabs items={["iOS", "Android"]}>
      <Tab>
        <Include src="_partials/custom-flows/email-password/sign-in-ios" />
      </Tab>

      <Tab>
        <Include src="_partials/custom-flows/email-password/sign-in-android" />
      </Tab>
    </Tabs>
  </If>
</Steps>
