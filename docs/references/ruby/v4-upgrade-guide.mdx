---
title: Clerk Ruby SDK Migration Guide
description: How to migrate from the Clerk Ruby SDK 3.x to 4.x.
---

In January 2025, we released version 4.0 of the Clerk Ruby SDK. This guide covers the breaking changes that were introduced and provides examples on how to resolve them.

## Configuration

`Clerk.configure` now accepts `secret_key` over the existing `api_key`.

```ruby {{ del: [4], ins: [5] }}
require 'clerk'

Clerk.configure do |c|
  c.api_key = `{{secret}}`
  c.secret_key = `{{secret}}`
end
```

## Middleware Cache Store

Previously, the `middleware_cache_store` was set to `Rails.cache` by default, if Rails was detected, otherwise it was set to `nil`. 
Now, the `middleware_cache_store` also attempts to use `ActiveSupport::Cache::MemoryStore` if Rails is not detected, before defaulting to `nil`.

## Available SDK Methods

With the introduction of our generated Ruby HTTP Client, the `Clerk::SDK` class methods have all been overhauled to align with the [Clerk OpenAPI specification](https://github.com/clerk/openapi-specs){{ target: '_blank' }}.

Please refer to the [Ruby HTTP Client repository documentation](https://github.com/clerk/clerk-http-client-ruby/tree/main/.generated#documentation-for-api-endpoints){{ target: '_blank' }} for more information on what methods are available via the `Clerk::SDK` class or the `clerk.sdk helpe method.
