---
title: Protect pages in your Nuxt app with Clerk
description: Learn how to protect the pages in your Clerk + Nuxt application.
sdk: nuxt
---

There are two ways to protect pages in your Nuxt application:

- [Use the `useAuth()` composable](#use-use-auth)
- [Use `createRouteMatcher()`](#use-create-route-matcher)

> [!NOTE]
> To learn how to protect API routes, see the [dedicated guide](/docs/references/nuxt/clerk-middleware#protect-api-routes).

## Use `useAuth()`

<Include src="_partials/vue-nuxt/use-auth" />

## Use `createRouteMatcher()`

The `createRouteMatcher()` is a Clerk helper function that allows you to protect multiple routes in your Nuxt application. It accepts an array of route patterns and checks if the route the user is trying to visit matches one of the patterns passed to it.

The `createRouteMatcher()` helper returns a function that, when called with the `to` route object from Nuxt's [`defineNuxtRouteMiddleware()`](https://nuxt.com/docs/api/utils/define-nuxt-route-middleware), will return `true` if the user is trying to access a route that matches one of the patterns provided.

### Configure route middleware

In your `middleware/` directory, create a file named `auth.global.ts` with the following code. This middleware:

- Uses the `userId` returned by the [`useAuth()`](/docs/references/vue/use-auth){{ target: '_blank' }} composable to check if the user is signed in.
- Uses the `createRouteMatcher()` helper to check if the user is trying to access a protected route.

If they aren't signed in and are trying to access a protected route, they are redirected to the sign-in page.

The following example demonstrates how to protect pages in your Nuxt application using `createRouteMatcher()` and `useAuth()`. Depending on whether your app runs in SSR or CSR mode, the approach differs slightly:

- In **SSR** mode, you can rely on middleware checks alone, since `userId` is available during server-side rendering.
- In **CSR** mode, the middleware runs before Clerk has finished loading the user's authentication status. This means `userId` may not be immediately available. To handle this correctly, combine middleware with [Clerk's control components](/docs/components/overview#control-components) inside your pages to manage loading and signed-in states.

<Tabs items={['SSR mode', 'CSR mode']}>
  <Tab>
    ```ts {{ filename: 'app/middleware/auth.global.ts' }}
    const isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])

    export default defineNuxtRouteMiddleware((to) => {
      const { userId } = useAuth()

      // If the user is not signed in, they aren't allowed to access
      // the protected route and are redirected to the sign-in page
      if (!userId.value && isProtectedRoute(to)) {
        return navigateTo('/sign-in')
      }
    })
    ```
  </Tab>

  <Tab>
    <CodeBlockTabs options={["Middleware page", "Protected page"]}>
      ```ts {{ filename: 'app/middleware/auth.global.ts' }}
      const isProtectedPage = createRouteMatcher(['/dashboard'])
      const isGuestPage = createRouteMatcher(['/sign-(in|up)'])

      export default defineNuxtRouteMiddleware((to) => {
        const { userId } = useAuth()

        // If a signed-in user tries to visit a guest page, redirect them to the dashboard
        if (userId.value && isGuestPage(to)) {
          return navigateTo('/dashboard')
        }

        // If the user is not signed in, they aren't allowed to access
        // the protected route and are redirected to the sign-in page
        if (!userId.value && isProtectedPage(to)) {
          return navigateTo('/sign-in')
        }
      })
      ```

      ```html {{ filename: 'app/pages/dashboard.vue' }}
      <template>
        <ClerkLoading>
          <div>Loading...</div>
        </ClerkLoading>

        <ClerkLoaded>
          <SignedIn>
            <YourProtectedContent />
          </SignedIn>
          <SignedOut>
            <div>Redirecting to sign in...</div>
            <!-- Safe to redirect here since Clerk is fully loaded -->
          </SignedOut>
        </ClerkLoaded>
      </template>
      ```
    </CodeBlockTabs>
  </Tab>
</Tabs>
