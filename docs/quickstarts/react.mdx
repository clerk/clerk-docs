import { Tab, Tabs } from "nextra-theme-docs";
import {Steps} from "nextra-theme-docs";
import { Callout } from "nextra-theme-docs";
import { YouTube } from "@/components/Youtube";
import { Images } from "@/components/Images";
import {Cards} from "@/components/Cards";
import { CodeBlockTabs } from "@/components/CodeBlockTabs";

# Use Clerk with React

Learn how to use Clerk to quickly and easily add secure authentication and user management to your React application.

<Steps>

### Install @clerk/clerk-react

Once you have a React application ready, you need to install Clerk's React SDK. This gives you access to our prebuilt components and hooks for React applications.

<CodeBlockTabs options={['npm', 'yarn', 'pnpm']}>
  ```bash filename="your-project" copy
  npm install @clerk/clerk-react
  ```

  ```bash filename="your-project" copy
  yarn add @clerk/clerk-react
  ```

  ```bash filename="your-project" copy
  pnpm i @clerk/clerk-react
  ```
</CodeBlockTabs>

### Set Environment Keys

Below is an example of your .env.local file. To get the respective keys go to the [API Keys](https://dashboard.clerk.dev/last-active?path=api-keys) page in the Clerk dashboard.

```sh copy filename=".env.local"
REACT_APP_CLERK_PUBLISHABLE_KEY=pk_test_••••••••••••••••••••••••••••••••••
```

### Configure `<ClerkProvider>`

Clerk requires your React application to be wrapped in the `<ClerkProvider/>` component. The `<ClerkProvider />` component provides active session and user context to Clerk's hooks and other components.

```tsx filename="app.tsx" copy
import React from "react";
import "./App.css";
import { ClerkProvider } from "@clerk/clerk-react";

if (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {
  throw new Error("Missing Publishable Key")
}
const clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY;

function App() {
  return (
    <ClerkProvider publishableKey={clerkPubKey}>
      <div>Hello from clerk</div>
    </ClerkProvider>
  );
}

export default App;
```

### Protecting Your Pages

Clerk offers Control Components that allow you to protect your pages, below is a simple example using Clerk's hosted components and the `<SignedIn/>` and `<SignedOut/>` control components.

```tsx filename="app.tsx" copy
import React from "react";
import "./App.css";
import {
  ClerkProvider,
  SignedIn,
  SignedOut,
  UserButton,
  useUser,
  RedirectToSignIn,
} from "@clerk/clerk-react";

if (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {
  throw "Missing Publishable Key"
}

const clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY;

function App() {
  return (
    <ClerkProvider publishableKey={clerkPubKey}>
      <SignedIn>
        <Welcome />
      </SignedIn>
      <SignedOut>
        <RedirectToSignIn />
      </SignedOut>
    </ClerkProvider>
  );
}

function Welcome() {
  return <div>Hello you are signed in</div>;
}

export default App;
```

#### Using a Routing Library with clerk

Clerk can work with any routing library, below is an example of how to use Clerk with React Router and embedding the Clerk components in your application.

```tsx filename="app.tsx" copy
import {
  ClerkProvider,
  SignedIn,
  SignedOut,
  RedirectToSignIn,
  SignIn,
  SignUp,
  UserButton,
} from "@clerk/clerk-react";
import { BrowserRouter, Route, Routes, useNavigate } from "react-router-dom";

if (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {
  throw new Error("Missing Publishable Key")
}

const clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY;

function PublicPage() {
  return (
    <>
      <h1>Public page</h1>
      <a href="/protected">Go to protected page</a>
    </>
  );
}

function ProtectedPage() {
  return (
    <>
      <h1>Protected page</h1>
      <UserButton />
    </>
  );
}

function ClerkProviderWithRoutes() {
  const navigate = useNavigate();

  return (
    <ClerkProvider
      publishableKey={clerkPubKey}
      navigate={(to) => navigate(to)}
    >
      <Routes>
        <Route path="/" element={<PublicPage />} />
        <Route
          path="/sign-in/*"
          element={<SignIn routing="path" path="/sign-in" />}
        />
        <Route
          path="/sign-up/*"
          element={<SignUp routing="path" path="/sign-up" />}
        />
        <Route
          path="/protected"
          element={
          <>
            <SignedIn>
              <ProtectedPage />
            </SignedIn>
             <SignedOut>
              <RedirectToSignIn />
           </SignedOut>
          </>
          }
        />
      </Routes>
    </ClerkProvider>
  );
}

function App() {
  return (
    <BrowserRouter>
      <ClerkProviderWithRoutes />
    </BrowserRouter>
  );
}

export default App;
```

### Read Session & User Data

Clerk provides a set of hooks and helpers that you can use to access the active session and user data in your React application. We have included examples of how to use these helpers to get you started.

#### `useAuth`

The `useAuth` hook is a convenient way to access the current auth state. This hook provides the minimal information needed for data-loading and helper methods to manage the current active session.

```tsx copy filename="pages/example.tsx"
import { useAuth } from "@clerk/clerk-react";

export default function Example() {
  const { isLoaded, userId, sessionId, getToken } = useAuth();

  // In case the user signs out while on the page.
  if (!isLoaded || !userId) {
    return null;
  }

  return (
    <div>
      Hello, {userId} your current active session is {sessionId}
    </div>
  );
}
```

#### `useUser`

The `useUser` hook is a convenient way to access the current user data where you need it. This hook provides the user data and helper methods to manage the current active session.

```tsx copy filename="pages/example.tsx"
import { useUser } from "@clerk/clerk-react";

export default function Example() {
  const { isLoaded, isSignedIn, user } = useUser();

  if (!isLoaded || !isSignedIn) {
    return null;
  }

  return <div>Hello, {user.firstName} welcome to Clerk</div>;
}
```
</Steps>

### Next Steps

Now you have an application integrated with Clerk you will want to read the following documentation:

<div className="container mx-auto my-4">
  <div className="grid grid-cols-1 gap-6 md:grid-cols-2">
    <Cards title="Customization & Localization" description="Learn how to customize and localize the Clerk components." link="/docs/components/customization/overview" cta="Learn More" />

    <Cards title="Authentication Components" description="Learn more about all our authentication components." link="/docs/components/authentication/sign-in" cta="Learn More" />

    <Cards title="Client Side Helpers" description="Learn more about our client side helpers and how to use them." link="/docs/references/react/use-auth" cta="Learn More" />
  </div>
</div>
