---
title: Connect MCP-compatible clients to your MCP server built with Next.js
description: Learn how to connect MCP-compatible clients, like Cursor, to your MCP server built with Next.js
---

<TutorialHero
  beforeYouStart={[
    {
      title: "An MCP server is required.",
      link: "/docs/references/nextjs/build-mcp-server",
      icon: "clerk",
    }
  ]}
/>

If you're building an application and want to allow large language model (LLM) apps to securely access user data within your app, you'll need to set up a **Model Context Protocol** (MCP) service. MCP enables external tools like LLM-based apps to request user permission to access specific data from your service. Refer to the [dedicated MCP section](/docs/oauth/how-clerk-implements-oauth#building-a-model-context-protocol-service) for more information.

There are two parties involved in MCP - "client" and "server". In web development, the terms "client" and "server" often refer to the frontend (browser) and backend (web server). However, in this context, these terms have different meanings:

- The "client" is the LLM application that wants to access another service on a user's behalf. For example, Claude would be the "client" if it wants to get access to Gmail.
- The "server" is the system that hosts the protected resources the client wants to access. In this example, this would be Gmail. This is sometimes referred to as the "resource server" or "MCP server".

This guide demonstrates how to connect an MCP-compatible client (**LLM app**), like Cursor, to an MCP server built with Next.js. It assumes that you have already built an MCP server in your Next.js application with Clerk by following the [Building an MCP server with Next.js](/docs/references/nextjs/build-mcp-server) guide.

## Connect your client LLM to your MCP server

Once your MCP server is set up, clients that support the latest MCP spec can now invoke the `get-clerk-user-data` tool to securely fetch user data from your app, assuming the request is authorized with a Clerk OAuth token. Refer to the [guide on verifying OAuth access tokens](/docs/oauth/verify-oauth-tokens) for more information.

To complete the integration, you'll need to connect a MCP-compatible client to your MCP server. Most LLM tools that support MCP allow you to register custom servers in a configuration file.

> [!IMPORTANT]
> Before proceeding, ensure you have toggled on the **Dynamic client registration** option in the [**OAuth Applications**](https://dashboard.clerk.com/last-active?path=user-authentication/oauth-applications) page.
> This setting allows MCP-compatible clients to automatically register themselves with your server during the OAuth flow.

### Example: Connecting Cursor to your MCP server

1. In your project's root, create a `.cursor` folder.
1. Inside this directory, create a `mcp.json` file with the following code.

```json {{ filename: '.cursor/mcp.json' }}
{
  "mcpServers": {
    "mcp-clerk-test": {
      "url": "http://localhost:3000/mcp"
    }
  }
}
```

1. Start your MCP server by running `npm run dev`.
1. Navigate to **Cursor Settings**. To find this, open the **Command Palette** (`Cmd/Ctrl + Shift + P`) and search for **Cursor Settings**, or select the gear icon in the top right corner of the app.
1. In the sidenav, select **Tools & Integrations**. If you don't see this, you may need to update Cursor to the latest version.
1. Under **MCP Tools**, enable the custom MCP server you just added (`mcp-clerk-test`) via the toggle.
1. Select the **Needs login** option when it loads. You'll be redirected to a Clerk OAuth consent screen to authorize Cursor to access your user data.
1. Select **Allow**. Once authorized, the tool `get_clerk_user_data` should be listed as enabled and you should see a green active status.
1. Start a new chat in [**Agent Mode**](https://docs.cursor.com/chat/agent) and prompt it to fetch your Clerk user data (e.g. "What is my Clerk user data?").
1. Select the **Run tool** option once it becomes available. The response will vary based on your prompt, but it should include key details from your Clerk profile, such as:

```yaml
User ID: <user-id>
Username: <username>
First Name: <first-name>
Last Name: <last-name>
Primary Email: <primary-email>
Secondary Email: <secondary-name>
2FA Enabled: No
Account Banned: No
Account Locked: No
Profile Image: <profile-image>
External Accounts: <external-account>
Organization Creation Enabled: Yes
Delete Self Enabled: Yes
```

You've now successfully connected your client (**Cursor**) to the MCP server and authenticated it using Clerk. Your LLM agent can securely access user data through the exposed tools in your server.
