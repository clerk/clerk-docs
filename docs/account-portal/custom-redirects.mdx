---
title: Customizing your redirects | Account Portal
description:  Customize where your users are redirected to after they sign-in or sign-up.
---

# Customizing your Account Portal redirects

After a user signs in or signs up, Clerk automatically redirects users back to your application by appending a `redirect_url` query param on the Account Portal page. However, Clerk provides various options for you to customize where your users are redirected to.

## Environment variables

You can define the paths you want the users to be redirected to via environment variables. In this example, we redirect users to "/dashboard" after signing in, and to "/onboarding" after signing up.

<Tabs items={["Next.js", "Remix"]}>
<Tab>
```sh filename=".env" copy
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/onboarding
```
</Tab>
<Tab>
```sh filename=".env" copy
CLERK_AFTER_SIGN_IN_URL=/dashboard
CLERK_AFTER_SIGN_UP_URL=/onboarding
```
</Tab>
</Tabs>

## Middleware

If you are using Next.js and want a more programmatically generated redirect option, you can use the `afterAuth()` function from our [Clerk middleware](/docs/references/nextjs/auth-middleware).

<Callout type="info" emoji="ðŸ’¡">
  The `afterAuth()` function will always take precedence over environment variables.
</Callout>

```tsx filename="middleware.ts" copy
export default authMiddleware({
  afterAuth(auth, req, evt) {
    // handle users who aren't authenticated
    if (!auth.userId && !auth.isPublicRoute) {
      if (req.url === "/onboarding") {
        return redirectToSignUp({ returnBackUrl: "/onboarding" });
      } else if (req.url === "/dashboard") {
        return redirectToSignIn({ returnBackUrl: "/dashboard" });
      }
    }
  },
  publicRoutes: ["/publicly-available-pages"],
});
```

{/* TODO (Alexis and Shehzad)
Does the afterSignInUrl and afterSignUpUrl props get passed to the ClerkProvider as well??
Also, I thought using the `<RedirectToSignIn />` component will navigate to the URL configured (thru env variables or auth middleware). [Source](https://clerk.com/docs/components/control/redirect-to-signin#redirect-to-sign-in)
Should these props instead be passed to the `<SignIn />` and `<SignUp />` components? [Source](https://clerk.com/docs/components/authentication/sign-in#props) */}

## `afterSignInUrl` and `afterSignUpUrl` props

You can explicitly define the redirect paths by passing the `afterSignInUrl` and `afterSignUpUrl` props to the respective components.

### Control components

```javascript copy
function App() {
  return (
    <ClerkProvider publishableKey={clerkPubKey} afterSignInUrl='/dashboard' afterSignUpUrl='/onboarding' >
      <SignedIn>
        <Welcome />
      </SignedIn>
      <SignedOut>
        <RedirectToSignIn afterSignInUrl='/dashboard' afterSignUpUrl='/onboarding' />
      </SignedOut>
    </ClerkProvider>
  );
}
```

<Callout type="info" emoji="ðŸ’¡">
  `<RedirectToSignIn />` or `<RedirectToSignUp />` child components will always take precedence over `<ClerkProvider />`. 
</Callout>

### Button components

In the case that you are using a [`<SignInButton />`](/docs/components/unstyled/sign-in-button) or [`<SignUpButton />`](/docs/components/unstyled/sign-up-button), you can also pass the props into those components. We recommend defining both `afterSignInUrl` and `afterSignUpUrl` redirects in each button as some users may choose to sign up instead after attempting to sign in.

## Dashboard Fallbacks

If you provide users with a direct link to the Account Portal pages, you can specify the redirects as a fallback in the Clerk Dashboard. 

<Callout type="info" emoji="ðŸ’¡">
  While we provide this functionality as a fallback, **we do not recommend** configuring this through the dashboard and encourage you to specify redirects in your application flows instead. 
</Callout>

### Paths

For development, set your static fallback localhost (e.g. http://localhost:3000) that we will use if we are unable to retrieve a dev browser for your client. In production, this will always be your application homepage. 

<Images 
  width={3248}
  height={2112}
  src="/docs/images/account-portal/account_portal_paths.png"
  alt="Account Portal paths"
/>
  
### Redirects

Next, you can specify the fallback redirects through the dashboard as well. 

<Images 
  width={3248}
  height={2112}
  src="/docs/images/account-portal/account_portal_redirects.png"
  alt="Account Portal redirects"
/>
  